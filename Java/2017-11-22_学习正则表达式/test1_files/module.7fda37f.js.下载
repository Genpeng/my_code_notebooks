;/*!question:widget/js/card/card.js*/
define("question:widget/js/card/card",function(s,a,i){function e(s){var a,i=s.user,e=s.imId,n=s.userName,t=s.uid,r=s.passPhoto,d=i.iconType,o=i.sex,c=i.gradeIndex,p=(i.gradeIndex,i.carefield),u=i.isFromTeam,m=i.teamName,v=i.teamId,g=(i.authTitle,i.isUserAdmin),f=(i.userAdminLevel,i.userAdminTitle),h=i.userAdminType,w=i.isFamous,k=i.isMaster,y=i.goodRate||0,T=i.grAnswerNum||0;a=s.encodeUid?"/usercenter?uid="+s.encodeUid:"http://www.baidu.com/p/"+n+"?from=zhidao";var x="";"2258746575"==t&&(x='log="bbzdFlag:2258746575,bbzdPos:answername"',a="http://baobao.baidu.com/",n="宝宝知道");var j='<div class="card-shadow line"><div class="user-card" id="user-card-'+e+'"><div class="line"><div class="grid avatar-79 avatar-radius mr-10"><a class="avatar-normal-a" alog-alias="qb-card-avatar" href="'+a+'" '+x+' target="_blank">';return j+="2258746575"==t?'<img class="avatar-normal-img" src="https://gss0.bdstatic.com/70cFsjip0QIZ8tyhnq/img/iknow/baobaozhidao-icon.jpg" /></a></div>':1==r?'<img class="avatar-normal-img" src="http://himg.bdimg.com/sys/portrait/item/'+e+'.jpg" /></a></div>':'<img class="avatar-normal-img" src="http://img.iknow.bdimg.com/avatar/100/r'+d+"s"+o+"g"+c+'.gif" /></a></div>',j+='<div class="grid message-link-wp" style="float:left;width:79px;text-align:center;"><a class="message-link" target="_blank" href="/ichat/chatlist?concats='+n+'">私信TA</a></div>',j+='<div class="grid ml-10 user-card-right"><p class="card-name mb-5"><a href="'+a+'" class="user-name f-yahei v-middle" alog-alias="qb-card-uname" target="_blank" '+x+">"+n+'</a><a class="ml-5 i-gradeIndex iknow-qb_grade_icons i-gradeIndex-'+c+'" href="http://www.baidu.com/search/zhidao_help.html#如何选择头衔" alog-alias="qb-card-grade" target="_blank"></a>',"1"==w&&(j+='<a class="i-famous ml-5" title="知道名人" href="http://www.baidu.com/search/zhidao/userelite.html" alog-action="qb-card-icon" target="_blank"></a>'),"1"==k&&(j+='<a class="i-master ml-5" title="知道达人" href="http://www.baidu.com/search/zhidao/userelite.html" alog-action="qb-card-icon" target="_blank"></a>'),"1"==g&&(j+='<a href="http://zhidao.baidu.com/user/admin" alog-action="qb-card-icon" target="_blank" class="card-uadmin-icon i-uadmin-'+h+' ml-5" title="'+f+'"></a>'),j+='<p class="mt-5 mb-5 cnl"><span class="f-info">采纳率：</span><span>'+y+'%</span><span class="ml-20 f-info">采纳数：</span><span>'+T+"</span></p>","1704499689"==t||"2258746575"==t||(j+='<p class="mt-5 mb-5 cnl" style="word-break: break-all"><span class="f-info">擅长：</span>',p&&p.length?l.forEach(p,function(s){j+='<a class="mr-10" href="/browse/'+s.cid+'" target="_blank" alog-alias="qb-card-area">'+s.cname+"</a>"}):j+="<span>暂未定制</span>",j+="</p>",u&&m&&(j+='<p class="mt-5 mb-5 cnl"><span class="f-info">参与团队&nbsp;：</span><a class="card-team-name" href="/uteam/view?fr=qb&teamId='+v+'" target="_blank" alog-alias="qb-card-isteam">'+m+"</a></p>"),j+='<p class="mt-5 mb-5 cnl"><a alog-alias="qb-ask-user" class="fixed-ask fixed-ask-normal" username="'+n+'">求助知友</a></p></div></div>'),"1704499689"==t?j+='<div style="border-top: 1px solid #e8ecee;padding-top: 5px;margin-top: 8px;">Du知道君是知道站内的人工智能，会根据知道用户的观点和内容总结出特定问题的答案，为知道用户提供更好的问答体验。</div>':"2258746575"==t&&(j+='<div style="border-top: 1px solid #e8ecee;padding-top: 5px;margin-top: 8px;">中国最专业的母婴知识社区。面向备孕、孕期、0-6岁父母，与三甲医院联手提供定制化及可视化服务。</div>'),j=b.autoTrans(j,1)}function n(){l(".user-card").delegate(".fixed-ask","click",function(a){a.preventDefault();var i=this;s.async(["common:widget/js/logic/iask/iask"],function(s){s(l(i).attr("username"))})})}function t(s){var a=s.userName,i=s.user,e=s.imId,n=(i.mavinUtype,i.mavinName),t=i.mavinAnswerNum,r=(i.mavinAdoptNum,i.mavinTitle),d=(i.mavinLevel,i.mavinLevelTitle,i.mavinAvatar),o=i.mavinFields.join("、"),c=i.mavinDesc,p="",u="",m=l.string.getByteLength,v=l.string.subByte;n&&(p=m(n)>12?v(n,11)+"..":n),r&&(u=m(r)>10?v(r,8)+"..":r);var g=i.mavinMajor,f=i.mavinHelpNum,h=i.mavinPraise,w=i.mavinLevelDesc,k="i-mavin-big-trade";"1"===g&&(k="i-mavin-big-prof");var y="",T='<span class="'+k+'" title="'+w+'"></span>',x="",j=['<div class="mavin-answers-detail line">','<div class="item grid"><p>累计回答</p><p class="number ff-yahei">'+t+"</p></div>",'<div class="item help-num grid"><p>帮助的人</p><p class="number ff-yahei">'+f+"</p></div>",'<div class="item grid"><p>收到的赞</p><p class="number ff-yahei">'+h+"</p></div>","</div>"].join(""),_="",q=['<div class="card-shadow line">','<div class="user-card mavin-card" id="user-card-'+e+'">','<div class="line mb-20">','<div class="grid avatar-79 '+x+' mr-10">','<a class="avatar-mavin-a" href="',1==i.mavinIsNew?"/hangjia/profile/":"/mavin/view/",a+'?ie=utf-8" target="_blank">','<img class="avatar-mavin-img" src="'+d+'" />',"</a>","</div>",'<i class="mavin-icon '+y+'"></i>','<div class="grid f-aid ml-10 pl-10">','<p class="card-name">','<a href="',1==i.mavinIsNew?"/hangjia/profile/":"/mavin/view/",a+'?ie=utf-8" class="f-black f-14 mr-10 ff-yahei" target="_blank" title="'+n+'">'+p+"</a>",T,"</p>","<p>"+o+'类行家<span class="f-pipe">|</span>'+r+"</p>",'<a class="mt-5 btn-22-green fixed-ask fixed-ask-mavin ff-yahei" username="'+a+'">向TA咨询</a>',"</div>","</div>",'<div class="card-info ',_,' ">',j,'<p><span class="f-aid">'+c+"</span></p>","</div>","</div>","</div>"].join("");return q=b.autoTrans(q,1)}function r(s){var a=(s.userName,s.imId,s.user),i=a&&a.business&&a.business.businessId,e=(a&&a.business&&a.business.cid,a&&a.business&&a.business.imgUrl),n=a&&a.business&&a.business.intro,t=(a&&a.business&&a.business.main,a&&a.business&&a.business.name),r=(a&&a.business&&a.business.siteUrl,a&&a.business&&a.business.slogan),d=(a&&a.business&&a.business.uid,a&&a.business&&a.business.uname,t&&t.length<13?t:t.slice(0,12)+"..."),o=['<div class="card-shadow line">','<div class="grid business-content-top clearfix">','<p class="avatar-70-border grid mr-15">','<a rel="nofollow" href="/business/profile?id='+i+'" target="_blank">','<img src="'+e+'"">',"</a>","</p>",'<div class="b-mid-wrap grid">','<p><a class="ff-yahei mr-10" href="/business/profile?id='+i+'" target="_blank">'+d+'</a><i class="iknow-qb_grade_icons i-company-avatar" title="'+t+'"></i></p>','<p class="mt-5 f-12">'+r+"</p>",'<p class="mt-5"><a class="btn-green-s b-chat-btn disabled f-14" href="javascript:;" target="_blank" data-businessid="'+i+'">给TA留言</a></p>',"</div>","</div>",'<div class="grid business-content-bottom">','<a href="/business/profile?id='+i+'" target="_blank">'+n+"</a>","</div>","</div>"].join("");return o=b.autoTrans(o,1)}function d(s){var a=s.user,i=a.siteLogo,e=(a.siteSlogan,a.app),n=a.siteUrl,t=a.companyIntro,r=l.string.getByteLength,d=l.string.subByte,o=280;t=r(t)>o?d(t,o-2)+"...":t;var c=['<div class="card-shadow opendev-shadow line">','<div class="user-card opendev-card">','<div class="">','<div class="top line">','<div class="grid avatar-70-border mr-10">','<a class="avatar-opendev-a opendev-log-a" href="',n,'" target="_blank">',"<span>",'<img class="avatar-opendev-img" src="',i,'" />',"</span>","</a>","</div>",'<div class="card-name-box grid f-aid">','<p class="card-name">','<a href="',n,'" class="f-black f-14 mr-10 ff-yahei opendev-log-a" target="_blank">',e,"</a>","</p>",'<p class="mt-10">','<a class="view-site grid btn-32-green opendev-log-a" target="_blank" href="',n,'">浏览官网</a>',"</p>","</div>","</div>",'<div class="card-info">','<p><span class="f-aid">',t,"</span></p>","</div>","</div>","</div>"].join("");return c=b.autoTrans(c,1)}function o(s){var a=s.user,i=(a.isUserAdmin,a.userAdminLevel,a.userAdminTitle),e=a.userAdminType,n="i-uadmin-big-"+e,t="转移标签",r="惊喜生日礼品、专属秒杀兑换、丰富月度奖励",d="right-box";"2"===e?t="转移标签、推荐回答":"3"===e?t="转移标签、推荐/加密回答、分拣问题":"4"===e&&(t="转移标签、推荐/加密回答等诸多权限",r="惊喜生日礼品、专属秒杀兑换、给力季度奖励");var o=['<div class="card-shadow line f-yahei">','<div class="user-card uadmin-icon-card line">','<div class="grid"><div class="',n,'"></div></div>','<div class="grid ',d,'">','<p class="title">',i,"</p>",'<div class="info">',"<p><span>权限：</span>",t,"<p><span>福利：</span>",r,"</p>","</div>","</div>","</div>","</div>"].join("");return o=b.autoTrans(o,1)}function c(s){var a=(s.userName,s.imId,s.user),i=a&&a.business&&a.business.businessId,e=(a&&a.business&&a.business.cid,a&&a.business&&a.business.imgUrl),n=a&&a.business&&a.business.intro,t=(a&&a.business&&a.business.main,a&&a.business&&a.business.name),r=(a&&a.business&&a.business.siteUrl,a&&a.business&&a.business.slogan),d=(a&&a.business&&a.business.uid,a&&a.business&&a.business.uname,a&&a.business&&a.business.type),o=t&&t.length<14?t:t.slice(0,12)+"...",c=r?r.length<15?r:r.slice(0,14)+"...":r,l=n&&n.length<61?n:n.slice(0,60)+"...",p="";r||(p="sloganEmpty");var u="i-business-normal";"2"===d&&(u="i-business-special");var m=['<div class="business-content-top line">','<p class="avatar-69 grid mr-10">','<a href="/business/profile?id='+i+'" target="_blank">','<img src="'+e+'"">',"</a>",'<i class="',u,'" title="'+t+'"></i>',"</p>",'<div class="info grid ',p,'">','<p><a href="/business/profile?id='+i+'" target="_blank">'+o+'</a><i class="i-business" title="百度知道机构行家"></i></p>','<p class="slogan">'+c+"</p>",'<p><a class="btn-green-xxs bb-chat-btn disabled" href="javascript:;" target="_blank" data-businessid="'+i+'">给TA留言</a></p>',"</div>","</div>",'<div class="grid business-content-bottom">','<a href="/business/profile?id='+i+'" target="_blank">'+l+"</a>","</div>"].join("");return m=b.autoTrans(m,1)}var l=s("common:widget/js/util/tangram/tangram"),p=s("common:widget/js/ui/tip/tip"),u=s("common:widget/js/util/log/log"),m=(s("common:widget/js/util/event/event"),s("question:widget/js/business/business")),b=s("common:widget/js/util/https/https");i.exports=function(s){var a=this,i=l(s.target),b=0==i.parents(".wgt-ask").length?i.parents(".wgt-replyer-best").prev(".wgt-ask"):i.parents(".wgt-ask"),v=0==i.parents(".answer").length?i.parents(".wgt-replyer-best").prev(".answer"):i.parents(".answer"),g={};if(b.length)g=F.context("page");else if(v.length){var f=v.prop("id").split("-")[1];g=F.context("answers")[f]}if("pushMavin"==s.type){var h=i.data("uid");g=F.context("pushMavin")[h]}if("business"!=s.type&&"qbusiness"!=s.type&&!g.userName)return!1;var w={my:"left top+10",at:"left bottom"};"qbusiness"===s.type&&(w.my="left-40 top",w.at="left bottom+17");var k={tooltipClass:"ik-tip-card",direction:"top",position:w,width:"qbusiness"===s.type?275:335,radius:!1,autoDispose:!1,target:i.eq(0)};switch("2258746575"==g.uid&&u.send({bbzdFlag:"2258746575",bbzdPos:"answername",bbzdFlagShow:!0}),s.type){case"business":k.content=r(g),k.tooltipClass+=" ik-tip-business-open",k.open=function(){this.getTipContainer().css({width:k.width+"px"}),m.checkOnline(l(".b-chat-btn").data("businessid"),l(".b-chat-btn")),l.ajax({url:"/business/submit/onbusinessbrowse",type:"POST",dataType:"json",data:{businessId:g.user.business.businessId,page:"3",token:F.context("businessToken")}}).done(function(){}).fail(function(){})};break;case"mavin":g.user.mavinIsNew&&u.addKey({mavinIsNew:1,mavinFields:(g.user.mavinFields||[]).join(",")}),k.tooltipClass+=" ik-tip-card-mavin",k.content=t(g),k.open=function(){n(g),this.getTipContainer().css({width:k.width+"px"})};break;case"pushMavin":g.user.mavinIsNew,k.tooltipClass+=" ik-tip-card-mavin",k.content=t(g),k.open=function(){n(g),this.getTipContainer().css({width:k.width+"px"})};break;case"normal":k.content=e(g),k.open=function(){l(".user-card .card-uadmin-icon").on("click",function(){u.send({page:"question",area:"card-uadmin-icon",action:"click"})}),n(g),this.getTipContainer().css({width:k.width+"px"})};break;case"opendev":k.content=d(g),k.tooltipClass+=" ik-tip-card-opendev",k.open=function(){l(".opendev-card .opendev-log-a").on("click",function(){u.send({page:"question",area:"opendev-a",action:"click",srcName:g.user.srcName})}),this.getTipContainer().css({width:k.width+"px"})};break;case"uadminIcon":k.content=o(g),k.tooltipClass+=" ik-tip-card-uadmin",k.open=function(){this.getTipContainer.css({width:k.width+"px"})};break;case"qbusiness":k.content=c(g),k.tooltipClass+=" ik-tip-quality-business",k.open=function(){this.getTipContainer().css({width:k.width+"px"}),m.checkOnline(l(".bb-chat-btn").data("businessid"),l(".bb-chat-btn")),l.ajax({url:"/business/submit/onbusinessbrowse",type:"POST",dataType:"json",data:{businessId:g.user.business.businessId,page:"3",token:F.context("businessToken")}}).done(function(){}).fail(function(){})}}var y=timerHide=0,T=50;"qbusiness"===s.type&&(T=200),i.mouseenter(function(){l('div[role="tooltip"]').hide(),clearTimeout(timerHide),a.tip||(a.tip=new p(k),a.tip.getTipContainer().mouseenter(function(){clearTimeout(timerHide),y=setTimeout(function(){a.tip.show()},T)}).mouseleave(function(){clearTimeout(y),timerHide=setTimeout(function(){a.tip.hide()},T)})),y=setTimeout(function(){a.tip.show(),"opendev"===s.type&&u.send({page:"question",area:"opendev-card-open",action:"pv",srcName:g.user.srcName})},T)}).mouseleave(function(){clearTimeout(y),a.tip&&"show"==a.tip.getStatus()&&(timerHide=setTimeout(function(){a.tip.hide()},T))})}});
;/*!question:widget/js/evaluate/evaluate.js*/
define("question:widget/js/evaluate/evaluate",function(t,a,i){var n=t("common:widget/js/util/tangram/tangram"),o=t("common:widget/js/ui/base/base"),s=(t("common:widget/js/util/event/event"),t("common:widget/js/logic/submit/submit")),l=(t("common:widget/js/logic/login/login"),t("common:widget/js/util/log/log")),u=t("common:widget/js/logic/mini-editor/mini-editor"),d=t("common:widget/js/ui/dialog/dialog"),r=t("common:widget/js/util/store/store"),m=t("common:widget/js/ui/tip/tip"),g=o().extend({_getElement:function(t){return t?this.target.find("#"+this.guid+"-"+t):this.target},_getBadElement:function(t){return t?this.badTarget.find("#"+this.guid+"-bad-"+t):this.badTarget},getEvaluteData:function(){var t=n.cookie.get("BAIDUID")?n.cookie.get("BAIDUID").split(":")[0]:0;return r.get("evaluate"+t)?r.get("evaluate"+t):!1},hasEvaluted:function(){return this.getEvaluteData()?n.array(this.getEvaluteData().split(",")).contains(this.currentData):!1},init:function(){var t=this;t.target=n(t.target),t.badTarget=t.target.next(),t.replyId=t.target.attr("id").replace(/[^\d]/g,""),t.qid=F.context("answers")[t.replyId].qid,t.isLogin=F.context("user").isLogin,t.currentData=[t.qid,t.replyId].join("|"),t.goodNum=t.target.data("evaluate"),t.badNum=t.badTarget.data("evaluate");var e=['<i class="iknow-qb_home_icons i-evaluate"></i>','<b class="evaluate-tip" style="display:none" id="#{guid}-tip"></b>','<b class="evaluate-num" id="#{guid}-num"></b>'].join("");t.hasEvaluted()&&(t.target.addClass("evaluated"),t.badTarget.addClass("evaluated")),t.isEvaluated=t.target.hasClass("evaluated")||t.hasEvaluted(),t.target.html(n.string(e).format({guid:t.guid})),t._getElement("tip").text(t.isEvaluated?"已评":"赞"),t._getElement("num").text(t.goodNum),t.goodNum<=9999&&t._getElement("num").addClass("evaluate-num-fixed"),t.badTarget.html(n.string(e).format({guid:t.guid+"-bad"})),t._getBadElement("tip").text(t.isEvaluated?"已评":"踩"),t._getBadElement("num").text(t.badNum),t.badNum<=9999&&t._getBadElement("num").addClass("evaluate-num-fixed"),t._bind()},_bind:function(){var t=this;t.target.mouseenter(function(){t._getElement("tip").show(),t._getElement("num").hide()}).mouseleave(function(){t._getElement("tip").hide(),t._getElement("num").show()}).click(function(e){if(e.preventDefault(),!n(this).hasClass("evaluate-mine")&&!t.isEvaluated){if(!t.isEvaluated){if(t.hasEvaluted())return void t._getElement("tip").text("赞");t.submit()}l.send({type:2014,action:"evaluate",page:"question",pos:"good",first:n(this).hasClass("evaluate-32")?1:0,rid:t.replyId})}}),t.on("commentsubmit",function(){d.alert("提交成功！",{width:"130px",className:"evaluate-tip-success"}),n(".ui-widget-overlay").hide(),setTimeout(function(){d.close()},1500)}),t.on("tipload",function(){var e=t.tip.getTipContainer(),a=new u({target:e.find(".tip-comment-editor").get(0),maxLength:15,defaultContent:"",width:206});t.editor=a,a.on("focus",function(){e.find(".comment-alert").eq(0).html("").hide()}),a.on("submit",function(){var e=this.getContent();return e==this.defaultContent||""===n.string.trim(e)?void d.alert("您输入的评论内容为空"):void t.submitComment(e)}),e.find(".btn-24-white").click(function(){a.fire("submit")}),t.on("commentsubmit",function(){t.tip.hide()})}),t.badTarget.mouseenter(function(){t._getBadElement("tip").show(),t._getBadElement("num").hide()}).mouseleave(function(){t._getBadElement("tip").hide(),t._getBadElement("num").show()}).click(function(e){if(e.preventDefault(),!n(this).hasClass("evaluate-mine")&&!t.isEvaluated){if(!t.isEvaluated){if(t.hasEvaluted())return void t._getBadElement("tip").text("踩");t.submitBad()}l.send({type:2014,action:"evaluate",page:"question",pos:"bad",first:n(this).hasClass("evaluate-32")?1:0,rid:t.replyId})}})},submit:function(){var t=this;new s({params:{cm:100669,qid:t.qid,aid:t.replyId,type:1},autoRefresh:!0,beforeJump:function(){t.isEvaluated=!0,t.target.addClass("evaluated").mouseout(),t.badTarget.addClass("evaluated").mouseout(),t.numScroll(t.target,!0);var e=n.cookie.get("BAIDUID")?n.cookie.get("BAIDUID").split(":")[0]:0,a=t.getEvaluteData()?[t.getEvaluteData(),t.currentData].join(","):t.currentData;if(r.set("evaluate"+e,a),t.showTip({header:"选个赞美的原因",defaultType:"button",tooltipClass:"evaluate-tip-dialog",type:1,tipText:["非常感谢","帮助较大","内容丰富","神级回答"]}),"1"==t.isLogin){['<div class="tip-comment-box line mt-10 mb-10">','<div class="tip-comment-editor grid"></div>','<a class="btn-24-white grid-r" title="按 Ctrl+Enter 发布">发布</a>','<p class="comment-alert" style="display:none;"></p>',"</div>"].join("")}t.goodNum>9999&&t._getElement("num").removeClass("evaluate-num-fixed"),t._getElement("tip").text("已评")}})},submitBad:function(){var t=this;new s({params:{cm:100680,qid:t.qid,aid:t.replyId,type:2},autoRefresh:!0,beforeJump:function(){t.isEvaluated=!0,t.badTarget.addClass("evaluated").mouseout(),t.target.addClass("evaluated").mouseout(),t.numScroll(t.badTarget);var e=n.cookie.get("BAIDUID")?n.cookie.get("BAIDUID").split(":")[0]:0,a=t.getEvaluteData()?[t.getEvaluteData(),t.currentData].join(","):t.currentData;r.set("evaluate"+e,a),t.showTip({header:"选个吐槽的原因",defaultType:"button",tooltipClass:"evaluate-tip-dialog evaluate-tip-dialog-bad",type:2,tipText:["答非所问","内容陈旧","回答错误","色情广告"]}),t.badNum>9999&&t._getBadElement("num").removeClass("evaluate-num-fixed"),t._getBadElement("tip").text("已评")}})},numScroll:function(t,e){var a=this,i=t.find(".i-evaluate").size()?t.find(".i-evaluate").eq(0):t;t=t.find(".evaluate-num").size()?t.find(".evaluate-num").eq(0):t;var n=e?"+1":"-1",o=parseInt(t.text())+1;t.html(o);var s=t.clone().css({display:"block",position:"absolute",right:0,top:0}).html(n),l=i.clone().css({display:"block",position:"absolute",left:0,top:0});t.parent().css("position","relative").append(s).append(l),s.animate({top:"-22px"},function(){s.remove(),a.fire("numscroll")}),l.animate({top:"-22px"},function(){l.remove(),a.fire("numscroll")})},showTip:function(t){var a=this,i=n.extend({skin:"evaluate-tip",header:"",footer:"",container:"",target:a.target,defaultType:"text"},t||{}),o=['<div class="#{skin}">','<div class="tip-header">#{header}</div>',"#{container}",'<ul class="line evaluate-text f-12" alog-group="qb-zan-quick"></ul>',"#{footer}","</div>"].join(""),s={my:"left-130 top+10",at:"left bottom"};a.tip=new m({tooltipClass:i.tooltipClass,position:s,closebox:!0,direction:"top",effect:!1,autoDispose:!1,content:n.string(o).format(i),target:i.target}),a.tip.show();var u=a.tip.getTipContainer(),d=i.tipText,r=u.find("ul").empty(),g=n(window).scrollTop();u.find(".tip-header").html(i.header),n(d).each(function(t,e){"text"==i.defaultType?r.append('<li><a data-num="'+(t+1)+'" href="#">'+e+"</a></li>"):"button"==i.defaultType&&r.append(0==t?'<li class="first"><a data-num="'+(t+1)+'"title="'+e+'" href="#">'+e+"</a></li>":'<li><a data-num="'+(t+1)+'"title="'+e+'" href="#">'+e+"</a></li>")}),u.find("ul li a").click(function(t){t.preventDefault(),a.submitComment(n(this).data("num"),i.type),l.send({type:2014,action:"evaluate",page:"question",tipsType:i.type,pos:"evaluate-tips-tag",rid:a.replyId}),a.tip.hide()});var p=function(t){!a.tip.getTipContainer().size()||n.contains(a.tip.getTipContainer().get(0),t.target)||n.contains(i.target.get(0),t.target)||(a.tip.hide(),n(document).unbind("click",p))};return n(document).on("click",p),n(window).on("scroll",function(){Math.abs(n(window).scrollTop()-g)>200&&(!a.tip.getTipContainer().size()||n.contains(a.tip.getTipContainer().get(0),e.target)||n.contains(i.target.get(0),e.target)||a.tip.hide())}),a.fire("tipload"),a.tip},submitComment:function(t,e){var a=this;if(""!=t){var i="/submit/ajax",n={qid:a.qid,aid:a.replyId,cm:"100712",num:t,type:e};new s({url:i,params:n,syncId:"evaluateComment",autoRefresh:!1,beforeJump:function(){a.fire("commentsubmit",e)}})}}});i.exports=g});
;/*!question:widget/js/comment/comment.js*/
define("question:widget/js/comment/comment",function(e,t,n){function a(e,t){var n=t._getElement("body").empty(),a=F.context("answers")[t.replyId];if(!(e.total_count>0))return t.target.html(g+"评论"),void t.container.addClass("no-comment");if(t.target.html(g+"评论(<em>"+e.total_count+"</em>)"),t.container.removeClass("no-comment"),e.data&&e.data.length>0&&(t.curPageData={firstReplyId:parseInt(e.data[0].reply_id,10),lastReplyId:parseInt(e.data[e.data.length-1].reply_id,10),currentPn:t.pn,total:e.total_count,count:e.response_count},0==t.pn&&(t.firstPageData=r.object.clone(t.curPageData)),r.each(e.data,function(o,i){var s,c,m=r("<div/>").addClass("comment-entry f-12"),d=r.string((i.title.indexOf("#")>0?"":i.title)+i.content).decodeHTML().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;"),l=!!a.user&&!!a.user.openSiteId&&a.user.openSiteId==i.reserved3;i.user_name.indexOf("#")>1?c=s="热心网友":l?(c=r.string(a.user.openSiteName).encodeHTML(),s='<a class="f-light comment-entry-userface" href="'+a.user.openSiteUrl+'" target="_blank"><img src="'+p.autoTrans("https://gss0.bdstatic.com/70cFsj3f_gcX8t7mm9GUKT-xh_/avatar/100/r6s2g1.gif")+'"/></a><a class="f-light comment-entry-username" href="'+a.user.openSiteUrl+'" target="_blank">'+c+"</a>"):(s=['<a class="f-light comment-entry-userface" href="/usercenter?uid='+i.encodeUid+'" target="_blank"><img src="'+p.autoTrans(i.user_avatar)+'"/></a><a class="f-light comment-entry-username" href="/usercenter?uid='+i.encodeUid+'" target="_blank">',r.string(i.user_name).encodeHTML(),"</a>"].join(""),c=i.user_name),m.html(['<div class="details f-aid">',s,'<span class="f-pipe">|</span>','<span class="comment-entry-time">',r.date.format(new Date(1e3*i.create_time),"yyyy-M-d HH:mm"),"</span>","</div>",'<div class="comment-content"><div class="comment-arrow"><em></em><span></span></div>',d,'<a class="reply-comment ml-5 f-light" href="#">回复</a>',"</div>"].join("")),n.append(m),0==o&&m.addClass("first"),o==e.data.length-1&&m.addClass("last");var u=F.context("user").name==i.user_name?1:0,g="1"==a.isCurrentUser?1:0,f=(1==F.context("user").isAdmin&&(10010==F.context("user").adminLevel||10011==F.context("user").adminLevel||10012==F.context("user").adminLevel),F.context("user").internalAdmin),h=f&&f.bitAuth||{};if(u||g||h.comment_delete){var v=r('<div class="comment-admin grid-r"/>').prependTo(m),y=r('<a href="#" class="comment-delete i-del" title="删除这条评论"/>').click(function(e){e.preventDefault(),t.remove(i.reply_id)}).appendTo(v).hide();h.user_band&&r('<a href="#" class="mr-5"/>').html("封禁用户").click(function(e){e.preventDefault(),window.open("/misc/usermanager?un="+r.url.escapeSymbol(i.user_name)+"&ie=gbk")}).prependTo(v),h.comment_delete?y.show():m.mouseover(function(){y.show()}).mouseout(function(){y.hide()})}m.find(".reply-comment").click(function(e){e.preventDefault(),t.editor.setContent("回复 "+c+"： "),t.replyToUser=i.user_name,t.replyToId=i.reply_id,t.replyTosUser=l?c:"";var n=t.editor.getElement("textarea"),a=n.value.length-1;if(n.setSelectionRange)n.setSelectionRange(a,a);else if(n.createTextRange){var o=n.createTextRange();o.move("character",a),o.select()}r(n).change(),n.focus();var a=t.container.offset();r("body").scrollTop()>a.top&&window.scroll(0,a.top-30)})}),e.total_count>t.rn)){var i=r("<p/>").addClass("comment-pager pager h-center pt-5 pb-15").attr("id",t.guid+"page");i.appendTo(n),o(t)}}function o(e){function t(t,a,o){var i='<a href="#"/>';r(i).html(t).addClass(o).click(function(t){t.preventDefault(),e.getPageData(a)}).appendTo(n)}var n=e._getElement("page").empty(),a=4,o=5,i=10,s=e.pn,c=e.rn,m=e.curPageData.total;if(c>=m)return"";var d=Math.floor(s/c),l=Math.ceil(m/c),u=0,p=l;l>i&&(a>=d?(u=0,p=i):d+o>=l?(u=l-i,p=l):(u=d-a,p=u+i),d>a&&t("首页",0,"pager-first")),u!=d&&t("<上一页",s-c,"pager-pre");for(var g=u;p>g;g++)g==d?r("<b/>").addClass("mr-5").html(g+1).appendTo(n):t(g+1,g*c);return l-1>d&&t("下一页>",s+c,"pager-next"),l>i&&l>d+o+1&&t("尾页",(l-1)*c,"pager-last"),n}var r=e("common:widget/js/util/tangram/tangram"),i=e("common:widget/js/ui/base/base"),s=e("common:widget/js/util/event/event"),c=(e("common:widget/js/logic/login/login"),e("question:widget/js/evaluate/evaluate"),e("common:widget/js/logic/authcode/authcode")),m=e("common:widget/js/logic/submit/submit"),d=e("common:widget/js/ui/dialog/dialog"),l=e("common:widget/js/logic/mini-editor/mini-editor"),u=e("common:widget/js/util/log/log"),p=e("common:widget/js/util/https/https"),g='<i class="iknow-qb_home_icons i-icon-comment mr-5"></i>',f=i().extend({_getElement:function(e){return r("#"+this.guid+(e||this.name))},getStatus:function(){return"none"==this.container.css("display")?"hide":"show"},getElement:function(e){return this._getElement(e).get(0)},init:function(){function e(e,t,a){return r("<"+e+"/>").attr("id",n.guid+t).addClass(a)}function t(){var t=['<div class="comment-arrow"><em></em><span></span></div>'];r.browser.ie&&r.browser.ie<9&&t.push('<b class="tl"></b><b class="tr"></b><b class="bl"></b><b class="br"></b>'),n.container=e("div",n.name,"comment-area").hide().append(t.join("")).append(e("div","inner","comment-area-inner"));var a=n.target.parents(".content");1==a.find(".forward-reply").size()?a.find(".editor").after(n.container):0==a.find(".admin-panel").before(n.container).size()&&a.after(n.container),n.container.find(".comment-arrow").css({left:n.target.offset().left-r(".qb-content").offset().left+20+"px"}),0==n.dispNum&&n.container.addClass("no-comment");var o=n._getElement("inner");o.append(e("div","comment-wrap","comment-action-wrap"));var i=o.find(".comment-action-wrap"),m=i.find(".mini-editor");m.find("textarea").css("color","#c5d1d8"),n.editor=new l({target:i,defaultContent:"请输入评论内容…",onsubmit:function(){n.submit()},onfocus:function(){n.authcode=n.authcode||new c({container:n.getElement("bar"),from:"new_comment",className:"mt-5"}),s.fire("comment.focus",n),m.css({borderColor:"#75d48f"}),n.container.find(".comment-arrow em").css("borderBottomColor","#75d48f")},onblur:function(){m.css({borderColor:"#d2dbe1"}),n.container.find(".comment-arrow em").css("borderBottomColor","#d2dbe1")}}),i.append(e("div","bar","comment-action-bar line")),e("div","action","comment-action grid-r mt-10 mb-10").append(e("a","submit","comment-submit ml-15 btn-33-green").prop({href:"#",title:"按 Ctrl+Enter 发布评论"}).html("发布评论").click(function(e){n.submit(),e.preventDefault()}).attr({"alog-action":"qb-comment-submit","data-realName":n.realName})).appendTo(n._getElement("bar")),o.append(e("div","body","comment-body line"))}var n=this;n.name="comment-area",n.rn=5,n.pn=0,n.target=r(r.isString(n.target)?"#"+n.target:n.target),n.replyId=n.target.attr("id").replace(/[^\d]/g,""),n.dispNum=F.context("answers")[n.replyId].hasComment||0,n.realName=F.context("user").isRealName,n.threadId=F.context("answers")[n.replyId].threadId||0,n.target.click(function(e){n.container||t(),"hide"==n.getStatus()?n.show():n.hide(),u.send({type:2014,action:"comment",page:"question"}),e.preventDefault()}).mousemove(function(){r(this).addClass("comment-hover")}).mouseout(function(){r(this).removeClass("comment-hover")})},show:function(){var e=this;s.fire("replyask.close",e.replyId),s.fire("adopt.close",e.replyId),s.on("comment.close",function(t,n){e.replyId==n&&e.hide()}),e.once("dataloaded",function(){e._getElement("loading").hide(),r(e.getElement()).slideDown(300,function(){var t=e.container.css("height","").offset().top,n=t+100,a=t+170;7==r.browser.ie&&(n+=30,a+=30),r("body").scrollTop()+r(window).height()<n&&window.scroll(0,a-r(window).height())})}),e.curPageData?e.fire("dataloaded"):(e.getElement("loading")||r("<div/>").prop({className:"comment-loading",id:e.guid+"loading"}).html('<img src="'+p.autoTrans("https://gss0.bdstatic.com/70cFsjip0QIZ8tyhnq/img/iknow/ask/loading.gif")+'" width="20" height="20" alt="loading..." />').insertBefore(e.container),e.getPageData())},getPageData:function(e){var t=this;t.pn=e||0;var n=r.url.jsonToQuery({method:"get_reply",app:"qb",thread_id:parseInt(t.threadId,10),start:t.pn,limit:t.rn,r:(new Date).getTime()});r.get("/api/comment?"+n,function(e){a(e,t),t.fire("dataloaded"),t.fire("show")},"json")},hide:function(){var e=this;r(e.getElement()).slideUp(300)},submit:function(){var e=this,t=e.editor.getContent();if(commentLen=e.editor.countByte?r.string(t).getByteLength():t.length,restLen=e.editor.maxLength-commentLen,t==e.editor.defaultContent)return void d.alert('<p class="h-center">您输入的评论内容为空</p>');if(!(0>restLen)){var n={qid:F.context("answers")[e.replyId].qid,aid:e.replyId,content:t,cun:e.replyToUser||"",cid:e.replyToId||""};!!e.replyTosUser&&r.extend(n,{sun:e.replyTosUser}),e.authcode&&e.authcode.submitParam(n),s.fire("login.check",{isLogin:function(t){if(1===t.isRealName&&0==r("#passport-accRealName-pop").length)s.fire("login.realName",{onSubmitSuccess:function(){new m({url:"/submit/comment/reply/?encoding=gbk",syncId:"commentReply",params:n,hasJump:!1,autoRefresh:!0,beforeJump:function(t,n){return n.content&&"null"!==n.content?(e.editor.setContent("").change(),e.replyToUser="",e.replyToId="",e.replyTosUser="",e.once("dataloaded",function(){var t=e.container.find(".first").get(0);r(t).fadeIn(function(){t.style&&t.style.zoom&&(t.style.zoom="1")})}),e.getPageData(0),void(e.authcode&&(e.authcode.dispose(),e.authcode=null))):void d.alert("可能含有不适当发表的内容哦，修改后再提交吧~")},authcode:e.authcode||null})}});else if(1===t.isRealName&&r("#passport-accRealName-pop").length>0)r("#passport-accRealName-pop").show(),r("body").children("div:first-child").show();else{new m({url:"/submit/comment/reply/?encoding=gbk",syncId:"commentReply",params:n,hasJump:!1,autoRefresh:!0,beforeJump:function(t,n){return n.content&&"null"!==n.content?(e.editor.setContent("").change(),e.replyToUser="",e.replyToId="",e.replyTosUser="",e.once("dataloaded",function(){var t=e.container.find(".first").get(0);r(t).fadeIn(function(){t.style&&t.style.zoom&&(t.style.zoom="1")})}),e.getPageData(0),void(e.authcode&&(e.authcode.dispose(),e.authcode=null))):void d.alert("可能含有不适当发表的内容哦，修改后再提交吧~")},authcode:e.authcode||null})}},noLogin:function(){s.fire("login.log",{onLoginSuccess:function(t){if(1!==t.isRealName){new m({url:"/submit/comment/reply/?encoding=gbk",syncId:"commentReply",params:n,hasJump:!1,autoRefresh:!0,beforeJump:function(){u.send({type:2014,action:"comment-submit",page:"question"});var t=location.href;t.match("#")&&(t=t.split("#")[0]),/[?|&]from=\w+/.test(location.search)&&(t=t.split("?")[0]),t=t.match(/\?/)?t+"&from=commentSubmit":t+"?from=commentSubmit",setTimeout(function(){location.href=t+"#answers"+e.replyId},1500)}})}}})}})}},remove:function(e){{var t=this;d.confirm('<div class="h-center">确定要删除该评论吗？</div>',{width:360,height:150,title:"知道提示",onaccept:function(){var n={qid:F.context("answers")[t.replyId].qid,aid:t.replyId,cid:e};s.fire("login.check",{isLogin:function(){new m({url:"/submit/comment/drop/",syncId:"commentDrop",params:n,hasJump:!1,autoRefresh:!0,beforeJump:function(){s.fire("dialog.close");var e=t.pn;t.curPageData.count<=1&&(e=e&&e-t.rn),t.curPageData=r.object.clone(t.firstPageData),t.getPageData(0>e?0:e)}})}})}})}}});n.exports=f,n.exports.getCount=function(){function e(){if(location.hash){var e=location.hash.replace(/[^\d]/g,"");-1!=location.search.indexOf("from=comment")&&r("#comment-"+e).click()}}var t=[],n={},a=[];if(r(".comment").each(function(e,o){var r=o.id.replace(/[^\d]/g,""),i=F.context("answers")[r],s=i.threadId;n[s]=parseInt(r,10),1==parseInt(i.hasComment,10)&&(t.push({thread_id:parseInt(s,10),reply_id:0,query_mask:999}),a.push(s))}),t.length){var o=r.url.jsonToQuery({method:"get_reply_count",app:"qb",thread_id:a.join(",")});r.get("/api/comment?"+o,function(t){if(t&&t.res)for(var o=0;o<t.res.length;o++){var i=r("#comment-"+n[a[o]]);t.res[o].total_count>0&&i.size()&&i.html(g+"评论(<em>"+t.res[o].total_count+"</em>)")}e()},"json")}}});
;/*!question:widget/js/ed2k/ed2k.js*/
define("question:widget/js/ed2k/ed2k",function(e,n,t){var i=e("common:widget/js/util/tangram/tangram"),a=e("common:widget/js/util/log/log"),o=(e("common:widget/js/logic/login/login"),e("common:widget/js/util/event/event")),d=(e("common:widget/js/util/uri/uri"),e("common:widget/js/ui/dialog/dialog"));window.bdplayerUa=F.context("page").bdplayer;var l,r,c=!!location.href.match(/video=/),p=function(e){var n=i.Deferred();return i.sio(e).callByBrowser(function(){n.resolve()}),n.promise()},s=-1,u=function(e){var n=null;try{n=new ActiveXObject("ThunderAgent.Agent")}catch(t){try{n=new ActiveXObject("ThunderAgent.Agent.1")}catch(t){}}if(n)try{return n.CallAddTask(e,"","",1,"",""),!0}catch(t){try{return n.AddTask(e,"","","","",1,1,10),n.CommitTasks(),!0}catch(t){}}try{var i=navigator.mimeTypes["application/np_xunlei_plugin"],a=document.createElement("embed");if(a.style.visibility="hidden",a.type="application/np_xunlei_plugin",a.width=0,a.height=0,document.body.appendChild(a),i&&a.DownLoadByThunderPlugin)return a.DownLoadByThunderPlugin(e),!0}catch(t){}return!1},m=function(e,n,t){var e=e.replace(/[^\x00-\xff]/g,encodeURIComponent);try{e=decodeURIComponent(e),n=decodeURIComponent(n),done()}catch(i){l||(l=p("https://gss0.bdstatic.com/70cFsj3f_gcX8t7mm9GUKT-xh_/question/gbk-url.js")),l.done(function(){try{e=GBK_URL.decode(e),n=GBK_URL.decode(n)}catch(i){}t({ed2kLink:e,filename:n})})}},k=function(){var n=i(".ed2k-wrap");n.size()&&a.send({type:2065,page:"qb_ed2k",action:"ed2k_pv",referrer:document.referrer}),n.each(function(n,t){var o=i(t).data("link"),l=i(t).data("filename");displayLink=o.replace(/[^\x00-\xff]/g,encodeURIComponent),displayLink=displayLink.substr(0,150)+"...";var r=['<div class="ed2k-con">','<a class="ed2k-link">',i.string(displayLink).encodeHTML(),"</a>",'<a class="btn-24-white btn-play"><span>在线播放<i></i></span></a>',"</div>"].join("");c||(r+='<p class="f-12 f-gray ed2k-comment">请<a class="baidu-player-link" target="_blank" href="http://player.baidu.com/player3/index.html?tn=141">下载百度影音</a>在线播放，或<a class="ed2k-copy-link" data-clipboard-text="'+i.string(o).encodeHTML()+'" href="'+i.string(o).encodeHTML()+'">复制链接</a>，使用其他软件进行下载。</p>'),i(t).html(r),m(o,l,function(e){i(t).data("link",e.ed2kLink),i(t).data("filename",e.filename)}),e.async(["common:widget/js/ui/clipboard/clipboard.min"],function(e){var n=new e(i(t).find(".ed2k-copy-link")[0]);n.on("success",function(e){d.alert("链接已复制到剪贴版"),a.send({type:2065,page:"qb_ed2k",action:"ed2k_copy_link_click"}),e.clearSelection()}),n.on("error",function(){d.alert("复制失败")})})})};t.exports.init=function(){i(function(){i.browser.ie&&i.browser.ie<=6?setTimeout(function(){k()},300):k()}),i("#qb-content").on("click",".ed2k-wrap .baidu-player-link",function(){a.send({type:2065,page:"qb_ed2k",action:"baidu_player_click"})}).on("mousedown",".ed2k-wrap .btn-play",function(){a.send({type:2065,page:"qb_ed2k",action:"ed2k_play_click",referrer:document.referrer})}).on("mousedown",".ed2k-wrap .ed2k-link",function(){a.send({type:2065,page:"qb_ed2k",action:"ed2k_link_click",referrer:document.referrer})}).on("click",".ed2k-wrap .ed2k-link, .ed2k-wrap .btn-play",function(n){n.preventDefault();var t=i(n.target).closest(".ed2k-wrap");r||(window.BdParam={},i('<div id="Bdobj" style="width: 0px;height: 0px;"></div><div id="callbdplay" style="width: 0px;height: 0px;"></div>').appendTo("body"),r=p("http://php.player.baidu.com/bdplayer/com_install.js")),r.done(function(){if(bdplayer.url=t.data("link"),bdplayer.title=t.data("filename"),-1==s&&(s=bdplayer.IsInstall()),s)return void setTimeout(function(){bdplayer.ClientPlay(t.data("link"),t.data("filename"))},1e3);if(bdplayer.VerUp)d.alert("为给您更好的观影体验，请下载最新版百度影音进行观赏。",{buttons:{items:[{text:"下载",click:function(){window.open("http://player.baidu.com/player3/index.html?tn=141"),o.fire("dialog.close")}}],align:"center",enable:!0}});else{if(u(t.data("link")))return;new d({title:"知道提示",content:'<div class="ed2k-dialog">您可以选择：<br/>1. 下载百度影音，直接在线播放；<br/>2. 复制链接，使用其他软件进行下载。</div>',autoDispose:!0,buttons:{items:[{text:"下载百度影音",btnClass:"btn-32-green",click:function(){window.open("http://player.baidu.com/player3/index.html?tn=141"),o.fire("dialog.close")}},{text:"复制链接",btnClass:"btn-32-silver btn-dialog-copy"}],align:"center",enable:!0},width:400,height:180}),i(".btn-dialog-copy").attr("data-clipboard-text",t.data("link")),e.async(["common:widget/js/ui/clipboard/clipboard.min"],function(e){var n=new e(i(".btn-dialog-copy")[0]);n.on("success",function(e){o.fire("dialog.close"),d.alert("链接已复制到剪贴版"),e.clearSelection()}),n.on("error",function(){d.alert("复制失败")})})}})})}});
;/*!question:widget/js/file/file.js*/
define("question:widget/js/file/file",function(e,t,n){function a(e){o("file").each(function(t,i){var n,a=o(i),s=a.parentsUntil(".answer").parent(".answer"),u=s&&s.attr("id").match(/\d+/)[0],g=a.parent().hasClass("replyask-content")?a.parent().attr("id").match(/\d+/)[0]:0,h=a.attr("fsid")||"",m=a.attr("wealth")||0,w=a.attr("link"),v=o.url.getQueryValue(w,"shareid"),x=o.url.getQueryValue(w,"uk"),j=g>0?g:u;if(!e||e.errno)n=['<div class="file line mt-10 f-12 file-fail">','<span class="ml-10 mr-5">附件加载失败，请</span>','<a target="_self" href="javascript:window.location.reload();">点击刷新</a>',"</div>"].join("");else{var M=!1;o(e.data).each(function(e,t){var a=t.fileMeta&&t.fileMeta.fs_id&&t.shareMeta&&0==t.shareMeta.errno&&0==t.shareMeta.status;if(a){if(t.fileMeta.fs_id==h){M=!0;var s=t.fileMeta,w=s.server_filename.split("."),y=s.server_filename;n=['<div class="file line mt-10 f-12">','<div class="file-inner clearfix">','<a href="#" target="_blank" class="grid mr-10 fileIcon-big ',b(w[w.length-1]),'"></a>','<div class="info grid file-dw-info">',"<p>",'<a href="#" target="_blank" class="f-yahei" title="',o.string.encodeHTML(y),'">',o.string.encodeHTML(l(y,26)),'</a><span class="f-gray ml-10">大小：',_(s.size),"</span>"],m>0&&"1"!=F.context("user").isAsker&&n.push('<span class="f-pipe">|</span><span class="f-gray">所需财富值：'+m+"</span>"),n.push('</p><p class="f-gray p-last f-green"><i class="i-solid-ok"></i> 已经过百度安全检测,放心下载'),n.push('</p></div><a class="grid-r btn-42-file-down-new" target="_blank" href="#">'),n.push('<i class="i-file-down"></i>'),n.push("<div><b>点击下载</b></div></a>"),n.push("</div></div>"),n=n.join(""),F.context("answer-file")[j]={error:!1,fileInfo:{fs_id:h,path:s.path,size:s.size,md5:s.md5,wealth:m}},o(i).parent().delegate(".file a","click",function(e){if(e.preventDefault(),m>0&&"1"!=F.context("user").isAsker&&"1"!=F.context("answers")[u].isCurrentUser){var t=function(e){var t=['<p class="mt-10 pl-10">',o.string.encodeHTML(l(s.server_filename,36)),'<span class="ml-10 f-aid">(',_(s.size),")</span><p>",'<div class="wealth-wraper"><p class="mb-10">下载所需财富值：<span class="f-bold">',m,"</span></p>","<p>您剩余的财富值：",e,"</p></div>"];return t.join("")},i=!1,n={type:2014,action:"click",module:"question",wealth:m,wealthLess:i};c.fire("login.check",{isLogin:function(){var e=F.context("user").wealth?parseInt(F.context("user").wealth,10):0;m>e&&(i=!0);{var a=i?'<span class="f-orange f-bold">'+e+'</span><a target="_blank" class="ml-10 f-12" href="http://www.baidu.com/search/zhidao_help.html#知道积分">如何赚取财富值</a>':'<span class="f-orange f-bold">'+e+"</span>",s=i?"btn-32-disabled":"btn-32-green",l=['<div class="tang-footer h-center mt-15"><a class="file-dbtn mr-10 btn ',s,'" href="#">下载</a>','<a class="file-cbtn ml-10 btn-32-white" href="#">取消</a></div>'].join(""),p=!1;new d({title:"下载文件",content:t(a)+l,width:460,height:260,buttons:[],open:function(){p||(p=!0,o(".tang-footer").delegate("a.file-dbtn","click",function(e){if(e.preventDefault(),r.send(o.extend(n,{pos:"accept-btn",isLogin:1})),!i){var t=window.open("about:blank"),a={cm:100675,qid:F.context("answers")[u].qid,rid:u,raid:g||0,fsid:h};c.fire("login.check",{isLogin:function(){new f({params:a,hasJump:!1,beforeJump:function(){k(v,x,function(e){t.location.href=e})}}),c.fire("dialog.close")}})}}),o(".tang-footer").delegate("a.file-cbtn","click",function(e){e.preventDefault(),c.fire("dialog.close"),r.send(o.object.extend(n,{pos:"cancel-btn",isLogin:1})),i&&location.reload()}),o(".tang-title").delegate("a.close-btn","click",function(){r.send(o.object.extend(n,{pos:"close-btn",isLogin:1})),i&&location.reload()}))}})}},noLogin:function(){d.confirm(t("登录后查看"),{title:"下载文件",width:460,height:260,buttons:[{text:"登录下载",click:function(){c.fire("login.log"),r.send(o.object.extend(n,{pos:"accept-btn",isLogin:0})),c.fire("dialog.close")}},{text:"取消",btnClass:"btn-32-white",click:function(){r.send(o.object.extend(n,{pos:"cancel-btn",isLogin:0})),c.fire("dialog.close")}}],open:function(){o(".tang-title").delegate("a.close-btn","click",function(){r.send(o.object.extend(n,{pos:"close-btn",isLogin:0}))})}})}})}else k(v,x,function(e){window.open(e)});r.send({type:2014,url:this.href,wealth:m,action:"click",pos:"file-download"})})}}else if(!M){p++;var L="1"==F.context("answers")[u].isCurrentUser?"您":"回答者",z="1"==F.context("answers")[u].isCurrentUser?"，请重新上传或删除。":"";n=['<div class="file line mt-10 f-12 file-fail">','<span class="fail">很抱歉，',L,"上传的附件已失效",z,"</span>","</div>"].join(""),F.context("answer-file")[j]={error:!0,fileInfo:{}}}})}var y=a.parents("dd"),L=y.attr("createTime"),z=!L&&""==o.string(y.text()).trim()||L&&o.string(y.text()).trim()==L;y.hasClass("replyask-content")&&(z||"删除"==o.string(y.text()).trim())&&(n="<br />"+n);var C=s.find(".wgt-wenku-link");C&&C.length>0&&(a.after(C),C.show()),a.after(n).remove()})}function s(e){h.length&&o.ajax({url:"/api/pcs",type:"GET",data:{fsid:h.join(),uid:x.join(),shareid:m.join(),qid:v.join(),rid:w.join()},async:!0,dataType:"json",complete:function(t,i){if("success"==i){var n=o.json.parse(t.responseText);a(n)}else a();o.isFunction(e)&&e()}})}var o=e("common:widget/js/util/tangram/tangram"),r=e("common:widget/js/util/log/log"),l=e("common:widget/js/util/suffix-str/suffix-str"),c=e("common:widget/js/util/event/event"),f=e("common:widget/js/logic/submit/submit"),d=e("common:widget/js/ui/dialog/dialog");F.context("answer-file",{});var p=0,u=[],g=F.context("page").rankFile,h=[],m=[],w=[],v=[],x=[];o("file").each(function(e,t){if(!(e>9)){var i=o(t),n=i.parentsUntil(".answer").parent(".answer"),a=i.attr("fsid")||"",s=o.url.getQueryValue(i.attr("link"),"shareid"),r=n&&n.attr("id").match(/\d+/)[0],l=n&&F.context("answers")[r].qid,c=n&&F.context("answers")[r].uid||"";h.push(a),m.push(s),w.push(r),v.push(l),x.push(c),"0"==g?n.hasClass("answer-hide")||u.push(a):"1"==g&&(n.hasClass("answer-fold")||n.hasClass("answer-hide")||u.push(a))}});var b=function(e){e=e||"default";var t={icon_file_image:"jpg,jpeg,gif,bmp,png,jpe,cur,svg,svgz,tif,tiff,ico",icon_file_visio:"vsd,vsdx",icon_file_pdf:"pdf",icon_file_word:"doc,docx,ods,ots,odt,rtf,dot,dotx,odm",icon_file_excel:"xls,xlsx,xlt,xltx,csv",icon_file_text:"txt,html,htm,xhtml,xml,js,css",icon_file_music:"wma,wav,mp3,aac,ra,ram,mp2,ogg,aif,mpega,amr,mid,midi",icon_file_video:"wmv,rmvb,mpeg4,mpeg2,flv,avi,3gp,mpga,qt,rm,wmz,wmd,wvx,wmx,wm,swf,mpg,mp4,mkv,mpeg,mov",icon_file_powerpoint:"ppt,pptx,pps,pot,ppsx,potx",icon_file_ipa:"ipa",icon_file_exe:"exe,msi",icon_file_zip:"zip,rar,7z,tar,gz",icon_file_apk:"apk",icon_file_default:"default",icon_file_torrent:"torrent"},n={};for(i in t){var a=t[i].split(",");for(j in a)n.hasOwnProperty(a[j]),void 0==n[a[j]]&&(n[a[j]]=i)}return n[e.toLowerCase()]?n[e.toLowerCase()]:n["default"]},_=function(e){var t=["B","K","M","G","T"],i=Math.min(Math.max(Math.floor(Math.log(e)/Math.LN2/10),1),5);return Math.round(100*e/Math.pow(2,10*i))/100+t[i]},k=function(e,t,i){var n=["shareid="+e,"uk="+t].join("&");o.get("/api/pcsshorturl?"+n,function(e){"string"==typeof e&&(e=o.parseJSON(e)),0===e.errno&&i&&i(e.data.shortUrl)})};n.exports.init=s});
;/*!question:widget/js/select-search/select-search.js*/
define("question:widget/js/select-search/select-search",function(e,t,n){function c(e){l(e||document.body).mouseup(function(e){var t=e.button;if(l.browser.ie<9?1==t:0==t){var n=e.target.id;setTimeout(function(){var e=Boolean(window.getSelection),t=e?window.getSelection():document.selection.createRange();g=(e?t+"":t.text).replace(/\n+/g,"|");var c,o=g.length,s=e?o&&t.getRangeAt(0):t;return c=i(s,e),c&&"selectsearch-icon"!=n&&u.send({type:2014,page:"question",action:"selectSearchShow",qid:F.context("page").qid,uid:F.context("user").uid,text:g||""}),2>o||o>200||"selectsearch-icon"==n||!c?r():(a(s,e,c),void(s=t=null))},25)}})}function i(e,t){if(t){var n=o(e.startContainer),c=o(e.endContainer);return null===n||null===c||n!=c?!1:n}var i=e.parentElement(),a=o(i);return a}function o(e){return l(e).attr(d)?e:l(e).parents("["+d+"]").get(0)}function a(e,t){var n,c=l("#selectsearch-icon");t?(c.size()||(c=l('<img id="selectsearch-icon"/>').attr({src:"https://gss0.bdstatic.com/70cFsjip0QIZ8tyhnq/img/iknow/qb/select-search.png",alt:"搜索"})),n=e.cloneRange(),n.collapse(!1),n.insertNode(c.get(0)),c.removeClass("selectsearch-hide"),n.detach()):(c.remove(),p=!1,n=e.duplicate(),n.collapse(!1),n.pasteHTML("<img id='selectsearch-icon' src='https://gss0.bdstatic.com/70cFsjip0QIZ8tyhnq/img/iknow/qb/select-search.png' alt='搜索'/>")),n=null,s()}function s(){p||(p=!0,l("#selectsearch-icon").click(function(){r(),u.send({type:2014,page:"question",action:"selectSearchClick",qid:F.context("page").qid,uid:F.context("user").uid,text:g||""}),window.open((window.supportHttps?"https:":"")+"//www.baidu.com/s?wd="+encodeURIComponent(g)+"&tn=SE_hldp00800_iw44c7tx&ie=utf-8&hl_tag=flayer")}))}function r(){l("#selectsearch-icon").addClass("selectsearch-hide")}var l=e("common:widget/js/util/tangram/tangram"),u=e("common:widget/js/util/log/log"),d="accuse",g="",p=!1,h=function(){c(l(".wgt-ask")),c(l(".answer"))};n.exports.init=h});
;/*!question:widget/js/thunder/thunder.js*/
define("question:widget/js/thunder/thunder",function(n,t){var e=n("common:widget/js/util/tangram/tangram"),i=n("common:widget/js/util/log/log"),a=(n("common:widget/js/util/event/event"),n("common:widget/js/util/uri/uri"),n("common:widget/js/ui/dialog/dialog")),c=function(n){var t=null;try{t=new ActiveXObject("ThunderAgent.Agent")}catch(e){try{t=new ActiveXObject("ThunderAgent.Agent.1")}catch(e){}}if(t)try{return t.CallAddTask(n,"","",1,"",""),!0}catch(e){try{return t.AddTask(n,"","","","",1,1,10),t.CommitTasks(),!0}catch(e){}}try{var i=navigator.mimeTypes["application/np_xunlei_plugin"],a=document.createElement("embed");if(a.style.visibility="hidden",a.type="application/np_xunlei_plugin",a.width=0,a.height=0,document.body.appendChild(a),i&&a.DownLoadByThunderPlugin)return a.DownLoadByThunderPlugin(n),!0}catch(e){}return!1},r=function(){var t=e(".thunder-wrap");t.size()&&i.addKey({hasThunder:1}),t.each(function(t,c){var r=e(c).data("link"),d=['<div class="thunder-con">','<a class="thunder-link cur-pointer" data-link="',r,'">',r,"</a>",'<a class="btn-24-white btn-thunder" data-link="',r,'">立即下载</a>',"</div>",'<p class="f-12 f-gray ed2k-comment">','请安装迅雷后点击下载，或<span class="thunder-copy-link f-blue" data-clipboard-text="',r,'">复制链接</span>进行下载。',"</p>"].join("");e(c).html(d),n.async(["common:widget/js/ui/clipboard/clipboard.min"],function(n){var t=new n(e(c).find(".thunder-copy-link")[0]);t.on("mousedown",function(){i.send({type:2014,page:"question",area:"thunder-copy",action:"click"})}),t.on("success",function(n){a.alert("链接已复制到剪贴版"),n.clearSelection()}),t.on("error",function(){a.alert("复制失败")})})})},d=function(n,t){i.send({type:2014,page:"question",area:n,action:"click"}),c(t)||a.alert("请安装迅雷后点击下载！")};t.init=function(){e(function(){e.browser.ie&&e.browser.ie<=6?setTimeout(function(){r()},300):r()}),e(".thunder-wrap").delegate(".thunder-link","click",function(n){n.preventDefault();var t=e(this).data("link");d("thunder-dw-link",t)}).delegate(".btn-thunder","click",function(n){n.preventDefault();var t=e(this).data("link");d("thunder-dw-btn",t)})}});
;/*!question:widget/ad-right/ad-right.js*/
define("question:widget/ad-right/ad-right",function(a){var o=a("common:widget/js/util/tangram/tangram"),s=a("common:widget/js/ui/carousel/carousel"),c=a("common:widget/js/util/log/log");a("common:widget/js/ui/lazyload/lazyload");var i=function(){!function(){var a,i=[],e=F.context("cmsRight");if("undefined"!=typeof e&&(!e||e.length)){c.addKey({cms_scroll_new:1}),o.each(e,function(a,o){if(o&&o.src){var s=['<a rel="nofollow" alog-alias="qb-cms-mask" log="page:question,pos:cms_scroll_new,index:',a,'" href="',o.url,'" target="_blank"',0!=a?' data-img="'+o.src+'"':"",">",0==a?'<img src="'+o.src+'" alt=""/>':"","</a>"].join("");i.push(s)}}),a=new s({items:i,controls:!0,indicators:!0,slide:function(a,s){var c=o(s.relatedTarget),i=c.find("a"),e=i.data("img");e&&i.html('<img src="'+e+'" alt=""/>')}}),a.render("#cms-mask");{var t=o("#cms-mask .carousel-misc"),n=o('<div class="cms-scroll-shadow"></div>').insertBefore(t),l=o("#cms-mask .carousel-control-left");o("#cms-mask .carousel-control-right")}l.css("left",(220-5*(2*e.length-1))/2+"px"),1==e.length&&(t.hide(),n.hide()),o("#cms-scroll").mouseenter(function(o){o.stopPropagation(),t.animate({top:140}),n.animate({top:140}),a.pause()}).mouseleave(function(o){o.stopPropagation(),t.animate({top:170}),n.animate({top:170}),a.cycle()}),o("#cms-scroll").click(function(){c.send({type:2014,page:"question",pos:"cms-scroll",action:"click"})}),o("#cms-company")&&c.addKey({cms_company:1}),o("#cms-company").click(function(){var a=o(this).find("a").attr("href"),s=a.indexOf("zhidao.baidu.com/liuyan");7===s&&c.send({type:2014,page:"question",pos:"cms-company-liuyan",action:"click"}),c.send({type:2014,page:"question",pos:"cms-company",action:"click"})})}}()},e=function(){var a=o(".cms-slide-optimus a").attr("data-img");o(".cms-slide-optimus a").append("<img src="+a+" />")};o(".cms-slide-lazy").lazyload({appear:i}),o(".cms-slide-optimus").lazyload({appear:e})});
;/*!question:widget/answers/answers.js*/
define("question:widget/answers/answers",function(s,e,i){function n(){u.hasClass("folding")?(p&&(p.hide(),p.hasClass("folding")&&a()),l.addClass("answer-fold"),w.size()&&0==d.size()&&"0"==f&&w.hide(),u.removeClass("folding"),h.html('查看更多其他回答<span></span><i class="i-answer-more ml-5"></i>'),r.send({type:2014,area:"rank3",action:"foldclick"})):(p&&p.show(),l.removeClass("answer-fold").children().first().removeClass("line"),w.size()&&0==d.size()&&w.show(),u.addClass("folding"),h.html('收起<span></span><i class="i-shrink-up ml-5"></i>'),r.send({type:2014,area:"rank3",action:"showfoldclick"}))}function a(){p.hasClass("folding")?(d.addClass("answer-hide"),showAnswerDispute.size()?showAnswerDispute.hide():w.size()&&"0"==f&&w.hide(),p.removeClass("folding"),c.find("span").hide(),c.find("i").removeClass("i-incline-up"),r.send({type:2014,area:"rank3",action:"hideclick"})):(d.removeClass("answer-hide").children().first().removeClass("line"),showAnswerDispute.size()?(showAnswerDispute.show(),p.hide()):w.size()&&w.show(),p.addClass("folding"),c.find("span").show(),c.find("i").addClass("i-incline-up"),r.send({type:2014,area:"rank3",action:"showhideclick"}))}function o(){showAnswerDispute.hasClass("folding")?(disputeAnswer.addClass("answer-dispute-hide"),normalAnswer.size()==disputeAnswer.size()&&t("#wgt-answers .hd").addClass("hide"),w.size()&&"0"==f&&w.hide(),showAnswerDispute.removeClass("folding"),showHideDispute.find("span").hide(),showHideDispute.find("i").removeClass("i-incline-up"),r.send({type:2014,area:"rank3",action:"disputehideclick"})):(disputeAnswer.removeClass("answer-dispute-hide").children().first().removeClass("line"),normalAnswer.size()==disputeAnswer.size()&&t("#wgt-answers .hd").removeClass("hide"),w.size()&&w.show(),showAnswerDispute.addClass("folding"),showHideDispute.find("span").show(),showHideDispute.find("i").addClass("i-incline-up"),r.send({type:2014,area:"rank3",action:"disputeshowclick"}))}var t=s("common:widget/js/util/tangram/tangram"),r=s("common:widget/js/util/log/log"),l=[],d=[],w=null,h=null,c=null,u=null,p=null,f=t.url.getQueryValue(location.search,"pn")||"0",m=function(){0==t(".wgt-best,.wgt-recommend,.wgt-special").size()&&t(".wgt-answers").size()&&t("#wgt-answers").removeClass("answer-foldable"),l=t(".answer-foldable .answer-fold"),normalAnswer=t("#wgt-answers .answer"),d=t(".answer-hide"),disputeAnswer=t(".answer-dispute"),w=t(".wgt-pager"),t("#wgt-answers").size()&&d.size()==t("#wgt-answers .answer").size()&&0==t("#wgt-answers .answer-mine").size()&&("0"==f?F.context("user").isAsker||t("#wgt-answers").hide():t("#wgt-answers").addClass("reply-hide-only")),(l.size()||d.size())&&w.size()&&"0"==f&&w.hide(),l.size()&&(u=t('<div id="show-fold-container"/>').insertBefore(l.get(0)),h=t('<div id="show-answer-fold"/>').html('查看更多其他回答<span></span><i class="i-answer-more ml-5"></i>').appendTo(u),h.click(function(){n()}).mouseover(function(){t(this).addClass("hover")}).mouseout(function(){t(this).removeClass("hover")})),(d.size()||disputeAnswer.size())&&(p=t("#show-hide-container"),c=t("#show-answer-hide"),showAnswerDispute=t(".show-answer-dispute"),showHideDispute=t(".show-hide-dispute"),c.click(function(){a()}).mouseover(function(){t(this).addClass("hover")}),t(c).mouseout(function(){t(this).removeClass("hover")}),showHideDispute.click(function(){o()}),u&&p.hide());var s=t.url.getQueryValue(location.href,"loc_ans");if(s){var e=t("#wgt-answers .answer"),i=null;e.each(function(e,n){-1!=t(n).attr("id").indexOf(s)&&(i=t(n))}),i&&(locAnswerFold=i.hasClass("answer-fold")&&t("#wgt-answers").hasClass("answer-foldable"),locAnswerHide=i.hasClass("answer-hide"),locAnswerFold&&n(),locAnswerHide&&a(),setTimeout(function(){t(document).scrollTop(i.offset().top-70)},200))}else{var m=t("#wgt-answers .answer-mine").eq(0),g=m.size()?m.parent().attr("id"):null,C=g&&m.parent().hasClass("answer-fold")&&t("#wgt-answers").hasClass("answer-foldable");myAnswerHide=g&&m.parent().hasClass("answer-hide"),g&&!(C||myAnswerHide&&l.size())&&setTimeout(function(){t(document).scrollTop(m.offset().top-70)},200),myAnswerHide&&0==l.size()&&a()}t(".hide-other-answer").click(function(){t(this).hide(),t(".answer-other").show(),r.send({pms:"otherAnswer",type:2014});var s=t(".no-bd");s.each(function(){t(this).removeClass("no-bd")})});var v=240,z=-144;t(".long-question-wrap").each(function(){var s=t(this),e=s.children(".long-question"),i=e.height();v>i&&(s.css("height",i),s.siblings(".expend").hide(),s.children(".long-question-mask").css("bottom",z))}),t(".answer-text").delegate(".expend","click",function(){var s=t(this),e=s.parent(),i=e.find(".long-question-wrap"),n=i.children(".long-question"),a=i.children(".long-question-mask"),o=n.height();t(this).hasClass("true")?(i.animate({height:v},1e3,function(){s.html('展开<i class="i-incline-down"></i>').removeClass("true")}),a.animate({bottom:0},1e3)):(i.animate({height:o},1e3,function(){s.html('收起<i class="i-incline-up"></i>').addClass("true")}),a.animate({bottom:z},1e3))}),t("#show-hide-container").size()&&r.addKey({show_hide_container:1});var A="i-incline-up",k="i-incline-down",y="quote-folded";t("#wgt-answers").on("click",".js-quote-fold",function(s){var e=t(s.target);e.toggleClass(k).toggleClass(A),e.parents(".js-quote").toggleClass(y)})};i.exports.insertBest=function(){},m()});
;/*!question:widget/ask/share/share.js*/
define("question:widget/ask/share/share",function(i,e){function t(i){var e=["toolbar=0,status=0,resizable=1,width=",i.width||440,",height=",i.height||430,",left=",(screen.width-(i.width||440))/2,",top=",(screen.height-(i.height||430))/2].join("");window.open(i.url,"shareWindow",e)||(location.href=i.url)}function o(i,e){var t={render:document.createElement("canvas").getContext?"canvas":"table",width:e.width,height:e.height,text:e.href};F.context("weixinShareTinyUrl")?(t.text=F.context("weixinShareTinyUrl"),i.qrcode(t)):n.ajax({url:"/api/gettinyurl",type:"POST",dataType:"json",data:{url:e.href}}).done(function(e){var o=e.data;0==e.errno?(F.context("weixinShareTinyUrl",o.tinyurl),t.text=o.tinyurl,i.qrcode(t)):i.qrcode(t)}).fail(function(){i.qrcode(t)})}var n=i("common:widget/js/util/tangram/tangram"),a=i("common:widget/js/ui/tip/tip"),s=i("common:widget/js/util/log/log");i("common:widget/js/logic/qrcode/qrcode"),e.init=function(i){if(i.target&&i.pageUrl&&i.title){var e=n(i.target),r=i.pageUrl,c=-1==r.indexOf("?")?"?":"&";e.on("tooltipopen",function(e,t){n(this).addClass("tips-open"),o(t.tooltip.find(".weixin-qrcode-img"),{width:100,height:100,href:r+c+"sharesource=weixin"}),i.logOpt&&(i.logOpt.action="share-view",s.send(i.logOpt))}),e.on("tooltipclose",function(){n(this).removeClass("tips-open")}),e.on("click",".others-share-item",function(e){if(e.preventDefault(),!n(this).hasClass("weixin")){var o=n(this),a={url:o.attr("href")};o.hasClass("weibo")||(a.width=800,a.height=600),t(a),i.logOpt&&(i.logOpt.action="share-click-"+o.data("type"),s.send(i.logOpt))}});var h={url:r+c+"sharesource=qq",title:i.title,pics:i.pic||"https://gss0.bdstatic.com/70cFsjip0QIZ8tyhnq/img/iknow/zhidaologo.png"},l={url:r+c+"sharesource=qzone",title:i.title,pics:i.pic||"https://gss0.bdstatic.com/70cFsjip0QIZ8tyhnq/img/iknow/zhidaologo.png"},d={url:r+c+"sharesource=weibo",title:i.weiboTitle||i.title,pic:i.pic||"https://gss0.bdstatic.com/70cFsjip0QIZ8tyhnq/img/iknow/zhidaologo.png"};i.summary&&(h.summary=i.summary,l.summary=i.summary,d.summary=i.summary);var p=[],g=[],m=[];for(var u in h)p.push(u+"="+encodeURIComponent(h[u]||""));for(var u in l)g.push(u+"="+encodeURIComponent(l[u]||""));for(var u in d)m.push(u+"="+encodeURIComponent(d[u]||""));var w="http://connect.qq.com/widget/shareqq/index.html?"+p.join("&"),f="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?"+g.join("&"),q="http://v.t.sina.com.cn/share/share.php?"+m.join("&"),v=['<div class="others-share">','<a href="javascript:void(0)" target="_blank" class="others-share-item weixin iknow-qb_share_icons" data-type="weixin-click"><span class="logo"></span></a>','<a href="'+q+'" target="_blank" class="others-share-item weibo iknow-qb_share_icons" data-type="weibo-click"><span class="logo"></span></a>','<a href="'+w+'" target="_blank" class="others-share-item qq iknow-qb_share_icons" data-type="qq-click"><span class="logo"></span></a>','<a href="'+f+'" target="_blank" class="others-share-item qzone iknow-qb_share_icons" data-type="qzone-click"><span class="logo"></span></a>',"</div>"].join("");e.html(v);var x,b,y=['<div class="weixin-container">','<div class="weixin-qrcode">','<div class="weixin-qrcode-img"></div>','<p class="weixin-qrcode-title">扫一扫分享到微信</p>',"</div>",'<div class="weixin-qrcode-lead"></div>',"</div>"].join(""),k={direction:"rightSilde"==i.pos?"right":"top",tooltipClass:"wgt-common-share-tip",content:y,target:e.find(".weixin")[0],position:{my:"rightSilde"==i.pos?"left-180 top":"left top+5",at:"rightSilde"==i.pos?"left-80 bottom-45":"left-80 bottom+5"}},_=n.extend(!0,k,i.tipsOpt);e.find(".weixin").hover(function(){clearTimeout(b),(x||(x=new a(_))).show(),x.getTipContainer().hover(function(){clearTimeout(b)},function(){b=setTimeout(function(){x.hide()},100)})},function(){b=setTimeout(function(){x.hide()},100)})}}});
;/*!question:widget/ask/ask.js*/
define("question:widget/ask/ask",function(i,t,e){function o(){var i,t;n("#modify-category").on("click",function(e){e.preventDefault(),i?i.open():(i=a.confirm('<div id="dig-modify-category"></div>',{title:"修改分类",width:"465px",onaccept:function(){var e={cm:100015,qid:F.context("page").qid,cid_bef:F.context("page").cid,cid_aft:t.getValue().cid};return e.cid_bef==e.cid_aft?(i.close(),void a.alert("转移前后的分类相同噢...",{onaccept:function(){i.open()},close:function(){i.open()}})):void new s({url:"/submit/user",params:e,beforeJump:function(){i.close();var t=new a({width:350,height:160,title:"知道提示",content:"转移分类成功啦~~",autoDispose:!0,close:function(){window.location.reload(!0)}});setTimeout(function(){t.close()},2e3),n.cookie.set("IK_QB_ALTER",1)},syncId:"modifyCate",errorDeal:function(){i.close(),a.alert("转移分类失败了: (")}})}}),t=new c({target:"#dig-modify-category",defaultValue:F.context("page").cid,selectSize:16}))})}var n=i("common:widget/lib/jquery/jquery"),a=i("common:widget/js/ui/dialog/dialog"),c=i("common:widget/js/logic/category/category"),s=i("common:widget/js/logic/submit/submit"),d=i("common:widget/lib/juicer/juicer"),l=i("common:widget/js/util/log/log"),r=i("common:widget/js/util/tangram/cookie"),p=i("question:widget/ask/share/share"),u=i("common:widget/js/util/webuploader/webuploader"),f=i("common:widget/js/util/https/https"),g=i("common:widget/js/util/event/event"),m=n("#recommond-pic-tpl").html(),h=n("#add-pic-confirm-tpl").html(),w=n("#local-upload-tpl").html(),v={init:function(i){var t=this;o(),t.bindEvent(i)},bindEvent:function(i){var t=this;n(".wgt-ask .add-pic").on("click",function(){{var e='<input type="text" name="linkInput" class="link-input" placeholder="请输入图片地址" /><div class="error-msg"></div>';a.confirm(h,{title:"添加一张配图",width:"762px",className:"question-addPicDialog",autoDispose:!0,onaccept:function(){var i=n("input[name=localPicture]:checked").data("type"),t=F.context("page").qid,e=n("input[name=localPicture]:checked").parent().data("pid"),o=F.context("user").uid;return e?void g.fire("login.check",{isLogin:function(){l.send({module:"question",page:"ask",area:"add-question-pic",action:"pv",islogin:1,no_login_type:"submit"}),n.ajax({type:"post",url:"/submit/QuestionAddPic",data:{type:i,qid:t,pid:e,uid:o},dataType:"json",success:function(i){0===i.errorNo?setTimeout(function(){window.location.reload()},500):a.alert(i.errmsg)}})},noLogin:function(){l.send({module:"question",page:"ask",area:"add-question-pic",action:"pv",islogin:0,no_login_type:"submit"}),g.fire("login.log",{onLoginSuccess:function(){window.location.reload()}})}}):void a.alert("请选择一张图片")},open:function(){n("#dialog-picture-album").prepend(d(m,i)),n(".ui-dialog-titlebar-close").addClass("iknow-icons").addClass("iconfont-rough-close"),t.addImgUploader();var o=n("#dialog-picture-album"),c=n(".ui-dialog-content"),s=n(".preview-bg"),r=n(window).height(),p=(r-180)/2,u=c.find(".preview-container"),h=n(window).width();u.css({width:h,height:r}),s.css({width:h,height:r}),c.find(".preview").css({"margin-top":p}),o.on("click",".select-btn",function(i){i.stopPropagation(),n(".select-btn").css({color:"#cfd7dc"}),n(this).css({color:"#4aca6d"}),n(this).find('input[name="localPicture"]').attr("checked",!0)}),o.on("click",".picture",function(){var i=n(this).data("src");c.find(".preview").attr("src",i),u.css({"z-index":9999}),u.show(),s.show()}),c.on("click",".preview",function(){u.css({"z-index":0}),u.hide(),s.hide()}),o.on("click",".add-pic-url",function(){var i=a.confirm(e,{title:"",width:"500px",className:"link-input-confirm",autoDispose:!0,buttons:[{text:"插入图片",click:function(){var t=n("input[name=linkInput]").val();return t?void g.fire("login.check",{isLogin:function(){l.send({module:"question",page:"ask",area:"add-question-pic",action:"pv",islogin:1,no_login_type:"copylink"}),n.ajax({type:"post",url:"/submit/ajax/",data:{cm:100682,picUrl:t},dataType:"json",success:function(t){var e=n(".add-pic-button"),o={pid:t.pid,type:2};"0"===t.errorNo&&t.url?setTimeout(function(){0===n(".local-upload").length?(e.addClass("add-pic-hover"),e.append(d(w,o))):n(".local-upload").attr("data-pid",t.pid);var a=n(".local-upload"),c=n(".add-pic-upload"),s=n(".add-pic-url"),l=a.find('input[name="localPicture"]');e.css({border:0,background:"url("+f.autoTrans(t.url)+") center no-repeat","background-size":"auto 100%"}),l.attr("checked",!0),n(".text-container").hide(),n(".select-btn").css({color:"#cfd7dc"}),a.css({color:"#4aca6d"}),l.attr("checked",!0),c.find("span").text("本地上传"),c.css({"border-bottom":0,"margin-top":"10px","padding-bottom":"10px"}),s.find("span").text("修改链接"),s.css({"margin-top":"10px"}),i.close()},500):n(".link-input-confirm").find(".error-msg").text("无法识别该链接")}})},noLogin:function(){l.send({module:"question",page:"ask",area:"add-question-pic",action:"pv",islogin:0,no_login_type:"copylink"}),g.fire("login.log",{onLoginSuccess:function(){location.reload()}})}}):void n(".link-input-confirm").find(".error-msg").text("请输入图片地址")}},{text:"取消",click:function(){i.close()}}]})})}})}})},addImgUploader:function(){var i=u.create({swf:"/static/swf/webuploader.swf",auto:!0,server:"/submit/ajax/",pick:{multiple:!1,id:"#add-img-btn"},resize:!1,formData:{cm:"100672"},duplicate:!0,fileVal:"image",accept:{title:"Images",extensions:"gif,jpg,jpeg,png",mimeTypes:"image/*"}});i.on("beforeFileQueued",function(i){var t=i.size>5242880;return t&&a.alert("啊哦，图片大小不能超过5M！"),!t}),i.on("uploadProgress",function(){n(".text-container").hide(),n(".is-loading").show(),n(".add-pic-button").css({background:"none"})}),i.on("uploadSuccess",function(i,t){var e=n(".add-pic-button");if(+t.errorNo)e.find(".is-loading").text("上传失败");else{var o={pid:t.pid,type:1};setTimeout(function(){e.css({background:"url("+f.autoTrans(t.url)+") center no-repeat","background-size":"auto 100%"}),0===n(".local-upload").length?(e.addClass("add-pic-hover"),e.append(d(w,o))):n(".local-upload").attr("data-pid",o),e.find(".is-loading").fadeOut("fast",function(){n(this).hide()});var i=n(".local-upload"),a=n(".add-pic-upload"),c=n(".add-pic-url");n(".select-btn").css({color:"#cfd7dc"}),i.css({color:"#4aca6d"}),i.find("input[name=localPicture]").attr("checked",!0),e.css({border:0}),a.find("span").text("重新上传"),a.css({"border-bottom":0,"margin-top":"10px","padding-bottom":"10px"}),c.find("span").text("复制链接"),c.css({"margin-top":"10px"})},500)}})}};n.get("/api/qbpv?q="+F.context("page").qid,function(i){i=parseInt(i,10);var t=n("#v-times").html("|").show();n("<span/>").addClass("browse-times").html(" 浏览 "+i+" 次").insertAfter(t)});var b=F.context("cmsTopic"),k=F.context("answers");n(b).each(function(i,t){t.expert&&n(k).each(function(i,e){"undefined"!=typeof e.userName&&n.contains(t.expert.split(","),e.userName)&&(n("#cms-topic").size()?n("#cms-topic").attr("href",t.url).html(t.title):n("#ask-info").append('<span class="f-pipe">|</span> 相关专题：<a id="cms-topic" rel="nofollow" href="'+t.url+'" target="_blank">'+t.title+"</a>"))})}),n(".q-content").delegate(".expend","click",function(){n(this).hasClass("true")?(n(this).parent().find(".con").show(),n(this).parent().find(".con-all").hide(),n(this).html('展开<i class="i-incline-down ml-5"></i>').removeClass("true")):(n(this).parent().find(".con").hide(),n(this).parent().find(".con-all").show(),n(this).html('收起<i class="i-incline-up ml-5"></i>').addClass("true"))}),p.init({target:n(".ask-info .share-area"),pageUrl:"http://zhidao.baidu.com/question/"+F.context("page").qid,title:document.title,logOpt:{module:"question",page:"qb",project:"new-qb-share",postion:"new-share"}}),n(".wgt-ask .offical-tip-close").click(function(){var i=n(this);i.parents(".official-tip").remove(),r.set("official_tip_"+F.context("page").qid,"1",{expires:2592e5})}),e.exports=v});
;/*!question:widget/push/push.js*/
define("question:widget/push/push",function(require,exports,module){var $=require("common:widget/js/util/tangram/tangram"),ec=require("common:widget/js/util/event/event"),log=require("common:widget/js/util/log/log"),Submit=require("common:widget/js/logic/submit/submit"),popTip=require("common:widget/js/ui/pop-tip/pop-tip"),AnswerDialog=require("question:widget/js/answer-dialog/answer-dialog"),Dialog=require("common:widget/js/ui/dialog/dialog"),cookieOption={path:"/",expires:"",domain:location.host.replace(/:\d+/,"")},dialogContent="";module.exports={init:function(cid,title){var me=this;me.cid=cid,me.title=title,me.authcode=null,me.wrapper=$(".wgt-push"),me.listTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push("");for(var i=0;i<list.length;i++)_template_fun_array.push('    <li class="line"  data-index="',"undefined"==typeof i?"":baidu.template._encodeHTML(i),'">        '),1==list[i].anonymous?_template_fun_array.push('            <img class="push-item-el push-item-img" src="https://gss0.bdstatic.com/7Ls0a8Sm1A5BphGlnYG/sys/portrait/item/jpg">        '):_template_fun_array.push('            <a log="action:click,area:wgt-push-usercenter,module:question,page:question" href="/usercenter?uid=',"undefined"==typeof list[i].imId?"":baidu.template._encodeHTML(list[i].imId),'" target="_blank" class="push-item-el push-item-img-a"><img class="push-item-el push-item-img" src="',"undefined"==typeof list[i].avatar?"":baidu.template._encodeHTML(list[i].avatar),'"></a>        '),_template_fun_array.push('        <span class="push-item-el push-item-time smooth">',"undefined"==typeof list[i].newCreateTime?"":baidu.template._encodeHTML(list[i].newCreateTime),'：</span>        <a log="action:click,area:wgt-push-question,module:question,page:question" href="/question/',"undefined"==typeof list[i].qid?"":baidu.template._encodeHTML(list[i].qid),'?push=4&entry=qb_qb_wait2refer" target="_blank" class="push-item-el push-item-link">',"undefined"==typeof(list[i].title&&list[i].title.length>25?list[i].title.substr(0,25)+"...":list[i].title)?"":baidu.template._encodeHTML(list[i].title&&list[i].title.length>25?list[i].title.substr(0,25)+"...":list[i].title),"</a>        "),list[i].score>0&&_template_fun_array.push('            <i class="iknow-icons wealth-icon push-item-el">&#xe652;</i>            <span class="wealth-span push-item-el">',"undefined"==typeof list[i].score?"":baidu.template._encodeHTML(list[i].score),"</span>        "),_template_fun_array.push("        "),list[i].hasPic&&_template_fun_array.push('            <i class="iknow-icons pic-icon push-item-el">&#xe65e;</i>        '),_template_fun_array.push('        <div class="push-item-el push-item-btn"  data-index="',"undefined"==typeof i?"":baidu.template._encodeHTML(i),'"><i class="iknow-icons">&#xe665;</i><span class="smooth">回答</span></div>    </li>');_template_fun_array.push(""),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],me.dialogTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="wpi-close"><i class="iknow-icons">&#xe603;</i></div><div class="wpi-dialog-img"></div><p class="wpi-dialog-title">帮人解惑，奉献知识，收获快乐！</p><div class="wpi-title">新手礼包</div><ul class="wpi-ul">    ');for(var j=0;j<reward.length;j++)_template_fun_array.push('    <li class="wpi-li">        <a href="/ihome/homepage/mytask" target="_blank">            <img src="',"undefined"==typeof reward[j].imgUrl?"":baidu.template._encodeHTML(reward[j].imgUrl),'" alt="" class="wpi-li-img">            <div class="wpi-li-intro">                <span>',"undefined"==typeof reward[j].name?"":baidu.template._encodeHTML(reward[j].name),"</span>                <em>+","undefined"==typeof reward[j].value?"":baidu.template._encodeHTML(reward[j].value),"</em>            </div>        </a>    </li>    ");_template_fun_array.push('</ul><div class="wpi-next-wp">    <p><em>新手连续答题7天</em>还将获得</p>    <div class="wpi-next-award">        <span>890财富值</span>        <span>神秘礼物</span>    </div></div><div class="wpi-button-group">    <div class="wpi-button-confirm">我知道了</div></div>'),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],me.fetchData(),me.bindEvents(),log.addKey({push:"1"})},fetchData:function(){var e=this;e.wrapper.find(".push-ul").addClass("hidden"),$.ajax({url:"/question/api/recommend",data:{rn:5,t:+new Date,cid:e.cid,title:encodeURIComponent(e.title)},dataType:"json",type:"get"}).done(function(t){t&&"object"===$.type(t)&&($.cookie.set("CPLN",t.CPLN,cookieOption),$.cookie.set("CPOFF",t.CPOFF,cookieOption),t.list&&t.list.length>0&&setTimeout(function(){e.renderList(t)},500),""===dialogContent&&t.reward.length>0&&(dialogContent=e.dialogTmpl(t)))})},renderList:function(e){var t=this;t.wrapper.removeClass("hidden"),t.data=e.list,t.wrapper.find(".push-ul").html(t.listTmpl(e)).removeClass("hidden"),t.wrapper.find(".wgt-push-change").removeClass("loading")},bindEvents:function(){var e=this;e.wrapper.on("click",".push-item-btn",function(){var t=$(this);t.hasClass("disable")||(log.send({module:"question",page:"question",area:"qbview-bottom-wait-answer-submit",action:"click"}),ec.fire("login.check",{isLogin:function(){var i=t.data("index");e.data[i]&&(e.dialog=new AnswerDialog({entry:"qb_qb_wait2",data:e.data[i],callback:function(){popTip("提交成功，谢谢帮助"),t.find("span").text("已回答").parent().addClass("disable")}}))},noLogin:function(){ec.fire("login.log",{onLoginSuccess:function(){window.location.reload()}})}}))}).on("click",".wgt-push-change",function(){$(this).hasClass("loading")||(log.send({module:"question",page:"question",area:"qbview-bottom-wait-answer-change",action:"click"}),$(this).addClass("loading"),e.fetchData())}).on("click",".wgt-push-intro",function(){if(""!==dialogContent){log.send({module:"question",page:"question",area:"wgt-push-intro",action:"click"});var e=new Dialog({width:480,className:"wgt-push-intro-dialog",content:dialogContent,closeOnEscape:!1,autoDispose:!0,open:function(){$(".wpi-close, .wpi-button-confirm").on("click",function(){e.close()})}})}})}}});
;/*!question:widget/value-comment/value-comment.js*/
define("question:widget/value-comment/value-comment",function(e,t,n){var i=e("common:widget/js/util/tangram/tangram"),a=e("question:widget/js/comment/comment"),o=e("question:widget/js/evaluate/evaluate"),m=e("common:widget/js/util/log/log");n.exports.init=function(e){var t=null,n=null,u=i("#comment-"+e),c=i("#evaluate-"+e);u.size()&&(t=new a({target:u})),c.size()&&(n=new o({type:0,target:c})),i(".comment").on("click",function(){m.send({type:2060,page:"qb",area:"comment",action:"click"})}),i(".evaluate-mine").mouseenter(function(){i(this).find(".evaluate-num").show(),i(this).find(".evaluate-tip").hide()})}});
;/*!question:widget/related/related.js*/
define("question:widget/related/related",function(e,t,a){var i=e("common:widget/js/util/tangram/tangram"),d=e("common:widget/js/util/log/log"),o=(e("common:widget/js/util/event/event"),e("common:widget/js/logic/file-type/file-type")),n=e("question:widget/js/ck/ck");a.exports=function(e){i("#wgt-related .file-unknow-1").each(function(){var e=o(i(this).html()).fileClass;i(this)[0].className=e+"-1"}),e.relatedLogType&&d.addKey({relate_type:e.relatedLogType}),e.isColumnLog&&d.addKey({related_column_show:"1",column_article_id:e.clmQid}),e.isPailog&&d.addKey({relatedBaidupaiShow:"1",paidupaiQid:e.paiQid}),d.addKey({relate:"1"}),e.isLog&&d.addKey({showjy:i("#wgt-related #related-exp").size()?1:2});var t;i(".exp-img-back").mouseenter(function(){var e=i(this);clearTimeout(t),t=setTimeout(function(){e.find(".exp-img-wall").animate({height:55},200).find("s").animate({opacity:.96},300)},200)}).mouseleave(function(){clearTimeout(t),i(this).find(".exp-img-wall").animate({height:0},200).find("s").animate({opacity:0},300)}).click(function(e){e.preventDefault(),window.open(this.getAttribute("href"))});var a=[];i("#wgt-related a[data-qid]").each(function(){a.push(i(this).data("qid"))}),F.context("page").relateQids=a.join("_")};var l=i(".ec-oad","#wgt-related");if(l.size()){var s=d.parse(l.find("a").data("log")),c=l.data("href");c&&(c+="&attach="+encodeURIComponent("r="+s.si),d.log(c)),d.addKey({related_ecoad_show:1}),l.find("a").each(function(){this.href+=(2==s.st?"&us=":"&attach=")+encodeURIComponent("r="+s.si)}),n.bind(l);var r=l.data("oad");r&&(r=r.split("_"),d.addKey({oadqid:r[4]||"",oadpos:r[5]||""}))}});
;/*!question:widget/s-yesorno/s-yesorno.js*/
define("question:widget/s-yesorno/s-yesorno",function(e){var t=e("common:widget/js/util/tangram/tangram"),i=e("common:widget/js/ui/pie/pie"),o=e("common:widget/js/util/log/log");t(".pie-holder","#yn-tab").each(function(){var e=t(this),o=.01*parseInt(e.text()),n=e.find("em").css("color");e.prepend(new i({pieR:28,donutR:24,rotation:-90,strokeWidth:0,slices:[{color:n,percent:o},{color:"#E6E9E0",percent:1-o}]}).getNode())}),t("li","#yn-tab").click(function(){var e=t(this),i=e.data("type");if(!e.is(".cur,.disabled")){var n=e.addClass("cur bt-"+i).siblings(".cur");n.removeClass("cur bt-"+n.data("type")),t("#yn-list").children().hide(),t("#list-"+i).show(),o.send({action:"click",area:"yesno",pos:"tab",tab:i})}})});
;/*!question:widget/s-recommend/s-recommend.js*/
define("question:widget/s-recommend/s-recommend",function(e,n){var s=e("common:widget/js/util/tangram/tangram"),i=e("common:widget/js/util/log/log");n.init=function(){var e=s(".item-hide");s("#wgt-s-recommend .expand").on("click",function(){s(this).hasClass("collapse")?(s(this).removeClass("collapse"),e.hide(),s(this).find("span").text("展开更多")):(i.send({pos:"s_recommend_expand",action:"click",page:"qb-new"}),s(this).addClass("collapse"),e.show(),s(this).find("span").text("收起全部"))})}});
;/*!question:widget/js/left-promotion/left-promotion.js*/
define("question:widget/js/left-promotion/left-promotion",function(t,o,e){var i=t("common:widget/lib/jquery/jquery"),n=t("common:widget/js/ui/base/base"),s=t("common:widget/js/util/event/event"),c=t("common:widget/js/util/log/log"),l=t("common:widget/js/util/https/https"),r=n(function(t){var o=this,e={closeBtnOffset:{right:0,top:0}};i.each(i.extend(e,t),function(t,e){i.isFunction(e)&&o.on(t,e)}),e.height=e.height||120,e.width=e.width||80,o.opt=e}).extend({init:function(){var t=this,o=i(".qb-section");setTimeout(function(){var e=t.opt.height,n=t.opt.width;i("<div/>").prop({"class":"left-promotion",id:"left-promotion"}).html(['<div class="close-layer"></div>','<img src="'+l.autoTrans(t.opt.imgSrc)+'"/>'].join("")).css({left:o.offset().left-n,top:.95*(i(window).height()-e),width:n,height:e}).appendTo("#body"),i("#left-promotion .close-layer").css(t.opt.closeBtnOffset),t.eventHandler()},1500)},eventHandler:function(){var t=this,o=i(".qb-section"),e=t.opt.height,n=t.opt.width;i(window).on("resize",function(){var t=.95*(i(window).height()-e);i(".bottom-ask-con").size()&&(t=.95*(i(window).height()-e-100)),i("#left-promotion").css({left:o.offset().left-n,top:t})}),i(".left-promotion").click(function(o){var e=i(o.target).closest(".close-layer").size(),n={type:2015,pos:e>0?"left-promotion-close":"left-promotion-click",action:"click",uname:F.context("user").name};i.extend(n,t.opt.log),c.send(n),e?t.close():t.opt.url&&window.open(t.opt.url,"_blank")}),s.on("bottomAsk.show",function(){i("#left-promotion").css({top:.95*(i(window).height()-e-100)})}),s.on("bottomAsk.hide",function(){i("#left-promotion").css({top:.95*(i(window).height()-e)})})},close:function(){i("#left-promotion").remove()}});e.exports=r});
;/*!question:widget/js/getInfo/getInfo.js*/
define("question:widget/js/getInfo/getInfo",function(r,n,t){function o(r){var n,t,o,e,f,i,a,c,s,l=Array(),A=7,x=12,p=17,w=22,y=5,I=9,b=14,j=20,q=4,L=11,k=16,z=23,B=6,D=10,E=15,F=21;for(r=m(r),l=v(r),i=1732584193,a=4023233417,c=2562383102,s=271733878,n=0;n<l.length;n+=16)t=i,o=a,e=c,f=s,i=g(i,a,c,s,l[n+0],A,3614090360),s=g(s,i,a,c,l[n+1],x,3905402710),c=g(c,s,i,a,l[n+2],p,606105819),a=g(a,c,s,i,l[n+3],w,3250441966),i=g(i,a,c,s,l[n+4],A,4118548399),s=g(s,i,a,c,l[n+5],x,1200080426),c=g(c,s,i,a,l[n+6],p,2821735955),a=g(a,c,s,i,l[n+7],w,4249261313),i=g(i,a,c,s,l[n+8],A,1770035416),s=g(s,i,a,c,l[n+9],x,2336552879),c=g(c,s,i,a,l[n+10],p,4294925233),a=g(a,c,s,i,l[n+11],w,2304563134),i=g(i,a,c,s,l[n+12],A,1804603682),s=g(s,i,a,c,l[n+13],x,4254626195),c=g(c,s,i,a,l[n+14],p,2792965006),a=g(a,c,s,i,l[n+15],w,1236535329),i=C(i,a,c,s,l[n+1],y,4129170786),s=C(s,i,a,c,l[n+6],I,3225465664),c=C(c,s,i,a,l[n+11],b,643717713),a=C(a,c,s,i,l[n+0],j,3921069994),i=C(i,a,c,s,l[n+5],y,3593408605),s=C(s,i,a,c,l[n+10],I,38016083),c=C(c,s,i,a,l[n+15],b,3634488961),a=C(a,c,s,i,l[n+4],j,3889429448),i=C(i,a,c,s,l[n+9],y,568446438),s=C(s,i,a,c,l[n+14],I,3275163606),c=C(c,s,i,a,l[n+3],b,4107603335),a=C(a,c,s,i,l[n+8],j,1163531501),i=C(i,a,c,s,l[n+13],y,2850285829),s=C(s,i,a,c,l[n+2],I,4243563512),c=C(c,s,i,a,l[n+7],b,1735328473),a=C(a,c,s,i,l[n+12],j,2368359562),i=h(i,a,c,s,l[n+5],q,4294588738),s=h(s,i,a,c,l[n+8],L,2272392833),c=h(c,s,i,a,l[n+11],k,1839030562),a=h(a,c,s,i,l[n+14],z,4259657740),i=h(i,a,c,s,l[n+1],q,2763975236),s=h(s,i,a,c,l[n+4],L,1272893353),c=h(c,s,i,a,l[n+7],k,4139469664),a=h(a,c,s,i,l[n+10],z,3200236656),i=h(i,a,c,s,l[n+13],q,681279174),s=h(s,i,a,c,l[n+0],L,3936430074),c=h(c,s,i,a,l[n+3],k,3572445317),a=h(a,c,s,i,l[n+6],z,76029189),i=h(i,a,c,s,l[n+9],q,3654602809),s=h(s,i,a,c,l[n+12],L,3873151461),c=h(c,s,i,a,l[n+15],k,530742520),a=h(a,c,s,i,l[n+2],z,3299628645),i=d(i,a,c,s,l[n+0],B,4096336452),s=d(s,i,a,c,l[n+7],D,1126891415),c=d(c,s,i,a,l[n+14],E,2878612391),a=d(a,c,s,i,l[n+5],F,4237533241),i=d(i,a,c,s,l[n+12],B,1700485571),s=d(s,i,a,c,l[n+3],D,2399980690),c=d(c,s,i,a,l[n+10],E,4293915773),a=d(a,c,s,i,l[n+1],F,2240044497),i=d(i,a,c,s,l[n+8],B,1873313359),s=d(s,i,a,c,l[n+15],D,4264355552),c=d(c,s,i,a,l[n+6],E,2734768916),a=d(a,c,s,i,l[n+13],F,1309151649),i=d(i,a,c,s,l[n+4],B,4149444226),s=d(s,i,a,c,l[n+11],D,3174756917),c=d(c,s,i,a,l[n+2],E,718787259),a=d(a,c,s,i,l[n+9],F,3951481745),i=u(i,t),a=u(a,o),c=u(c,e),s=u(s,f);var G=S(i)+S(a)+S(c)+S(s);return G.toLowerCase()}var e=function(r,n){return r<<n|r>>>32-n},u=function(r,n){var t,o,e,u,f;return e=2147483648&r,u=2147483648&n,t=1073741824&r,o=1073741824&n,f=(1073741823&r)+(1073741823&n),t&o?2147483648^f^e^u:t|o?1073741824&f?3221225472^f^e^u:1073741824^f^e^u:f^e^u},f=function(r,n,t){return r&n|~r&t},i=function(r,n,t){return r&t|n&~t},a=function(r,n,t){return r^n^t},c=function(r,n,t){return n^(r|~t)},g=function(r,n,t,o,i,a,c){return r=u(r,u(u(f(n,t,o),i),c)),u(e(r,a),n)},C=function(r,n,t,o,f,a,c){return r=u(r,u(u(i(n,t,o),f),c)),u(e(r,a),n)},h=function(r,n,t,o,f,i,c){return r=u(r,u(u(a(n,t,o),f),c)),u(e(r,i),n)},d=function(r,n,t,o,f,i,a){return r=u(r,u(u(c(n,t,o),f),a)),u(e(r,i),n)},v=function(r){for(var n,t=r.length,o=t+8,e=(o-o%64)/64,u=16*(e+1),f=Array(u-1),i=0,a=0;t>a;)n=(a-a%4)/4,i=a%4*8,f[n]=f[n]|r.charCodeAt(a)<<i,a++;return n=(a-a%4)/4,i=a%4*8,f[n]=f[n]|128<<i,f[u-2]=t<<3,f[u-1]=t>>>29,f},S=function(r){var n,t,o="",e="";for(t=0;3>=t;t++)n=r>>>8*t&255,e="0"+n.toString(16),o+=e.substr(e.length-2,2);return o},m=function(r){r=r.replace(/\x0d\x0a/g,"\n");for(var n="",t=0;t<r.length;t++){var o=r.charCodeAt(t);128>o?n+=String.fromCharCode(o):o>127&&2048>o?(n+=String.fromCharCode(o>>6|192),n+=String.fromCharCode(63&o|128)):(n+=String.fromCharCode(o>>12|224),n+=String.fromCharCode(o>>6&63|128),n+=String.fromCharCode(63&o|128))}return n};t.exports={init:o}});
;/*!question:widget/js/phone-search/phone-search.js*/
define("question:widget/js/phone-search/phone-search",function(e,t,n){var i=e("common:widget/lib/jquery/jquery"),o=e("common:widget/js/ui/tip/tip"),s=e("common:widget/js/util/log/log"),a={replace:function(e,t){if(e&&!(e.length<=0)){var n=e.html();i.each(t,function(e,t){var o=i.trim(t.previous_phone),s=t.pure_phone,a=new RegExp("("+o+'(?!<i class="searcher"|" title="searcher">))',"gi");n=n.replace(a,'<span class="phone-number-searcher-wp">$1<i class="searcher" data-pure_number="'+s+'" title="searcher"><img src="https://gss0.bdstatic.com/7051cy89RsgCncy6lo7D0j9wexYrbOWh7c50/phonesearch.png"></i></span>')}),e.html(n),e.find(".phone-number-searcher-wp .searcher img").hover(function(){var e=i(this).parents(".searcher"),t=e.data("pure_number");i.ajax({url:"/api/phonecheck?tel=",type:"GET",dataType:"json",data:{tel:t}}).done(function(n){if(!(n.errno>0)){var i=n.data&&n.data.response&&n.data.response[t],s="";"report"==i.type?(s+='<div class="phone-number-tip-content report">',s+='<div class="logo"></div>',s=s+'<div class="text first"><span>疑似'+i.name+":</span> "+t+"</div>",s=s+'<div class="text sencond"> 被'+i.count+"人标记为“"+i.name+"”</div>"):"poi"==i.type?(s+='<div class="phone-number-tip-content poi">',s+='<div class="logo"></div>',s=s+'<div class="text first"><span>'+i.name+":</span> "+t+"</div>"):i.location&&i.location.province?(s+='<div class="phone-number-tip-content normal">',s+='<div class="logo"></div>',s=s+'<div class="text first"><span>普通号码:</span> '+t+"</div>",s=s+'<div class="text sencond">'+i.location.province+i.location.city+" | "+i.location.operators+"</div>"):(s+='<div class="phone-number-tip-content unknow">',s+='<div class="logo"></div>',s+='<div class="text first"> 该号码查不到任何信息</div>',s=s+'<div class="text sencond">'+t+"</div>"),s+="</div>",e[0].phoneNumberTip=new o({tooltipClass:"phone-number-searcher-tip",target:e,direction:"bottom",arrow:!1,content:s,position:{my:"left top",at:"right bottom"}})}}),s.send({module:"question",page:"detail",area:"phone-search",action:"search"})},function(){var e=i(this).parents(".searcher");e[0].phoneNumberTip&&e[0].phoneNumberTip.hide()})}}};n.exports=a});
;/*!question:widget/back-insert/back-insert.js*/
define("question:widget/back-insert/back-insert",function(t){var i=t("common:widget/js/util/tangram/tangram"),n=t("common:widget/js/util/log/log");i("#wgt-back-insert .qb-title").click(function(){n.send({type:2014,page:"question",pos:"back_insert_title",action:"click"})}),i("#wgt-back-insert .show-all").click(function(){n.send({type:2014,page:"question",pos:"back_insert_all",action:"click"})})});
;/*!question:widget/answer-share/answer-share.js*/
define("question:widget/answer-share/answer-share",function(e,t){{var n=e("common:widget/js/util/tangram/tangram"),a=(e("common:widget/js/util/log/log"),e("common:widget/js/logic/share/share"));n(".answer-share-widget")}t.init=function(e){var t=".answer-share-"+e.id;a.init({target:n(t),pageUrl:"http://zhidao.baidu.com/question/"+F.context("page").qid,title:document.title,summary:e.content,logOpt:{module:"question",page:"qb",project:"new-qb-share",postion:"new-share"}})}});
;/*!question:widget/dom-ready/dom-ready.js*/
define("question:widget/dom-ready/dom-ready",function(n,t,e){var o=(n("common:widget/js/util/tangram/tangram"),n("common:widget/js/util/log/log"));e.exports={init:function(){o.send({page:"question",action:"entrance"})}}});
;/*!question:widget/waiting-answers/waiting-answers.js*/
define("question:widget/waiting-answers/waiting-answers",function(require,exports,module){var $=require("common:widget/js/util/tangram/tangram"),ec=require("common:widget/js/util/event/event"),log=require("common:widget/js/util/log/log"),Submit=require("common:widget/js/logic/submit/submit"),popTip=require("common:widget/js/ui/pop-tip/pop-tip"),AnswerDialog=require("question:widget/js/answer-dialog/answer-dialog");module.exports={init:function(entry){var me=this;me.authcode=null,me.wrapper=$(".waiting-answers-wp"),me.listTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push("");for(var i=0;i<data.length;i++)_template_fun_array.push('<li class="waiting-item" data-id="',"undefined"==typeof data[i].qid?"":baidu.template._encodeHTML(data[i].qid),'" data-index="',"undefined"==typeof i?"":baidu.template._encodeHTML(i),'">    <div class="waiting-user smooth">'),data[i].isAnonymous||data[i].isNoUserName?_template_fun_array.push("热心网友"):_template_fun_array.push("","undefined"==typeof data[i].uname?"":baidu.template._encodeHTML(data[i].uname),""),_template_fun_array.push('问：</div>    <div class="waiting-question">        '),data[i].score>0&&_template_fun_array.push('            <i class="iknow-icons">&#xe652;</i>            <span class="waiting-span">',"undefined"==typeof data[i].score?"":baidu.template._encodeHTML(data[i].score),"</span>        "),_template_fun_array.push('        <a href="/question/',"undefined"==typeof data[i].qid?"":baidu.template._encodeHTML(data[i].qid),"?push=4&entry=","undefined"==typeof entry?"":baidu.template._encodeHTML(entry),'refer" target="_blank">'),data[i].title.length>34?_template_fun_array.push("","undefined"==typeof data[i].title.substr(0,34)?"":baidu.template._encodeHTML(data[i].title.substr(0,34)),"..."):_template_fun_array.push("","undefined"==typeof data[i].title?"":baidu.template._encodeHTML(data[i].title),""),_template_fun_array.push('</a>    </div>    <div class="waiting-bottom">        <div class="waiting-submit-btn" data-index="',"undefined"==typeof i?"":baidu.template._encodeHTML(i),'"><i class="iknow-icons">&#xe665;</i><span>回答</span></div>    </div></li>');_template_fun_array.push(""),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],me.fetchData(),me.entry=entry||"qb_qb_wait",this.bindEvents()},fetchData:function(){var e=this;e.wrapper.find(".waiting-answers-ul").addClass("hidden"),$.ajax({url:"/question/api/qfeedlist",data:{rn:3,t:+new Date},type:"get",dataType:"json"}).done(function(a){0===a.errno&&setTimeout(function(){e.renderList(a)},500)})},renderList:function(e){var a=this;a.wrapper.removeClass("hidden"),a.data=e.data,e.entry=a.entry,a.wrapper.find(".waiting-answers-ul").html(a.listTmpl(e)).removeClass("hidden"),a.wrapper.find(".waiting-answers-change").removeClass("loading")},bindEvents:function(){var e=this;e.wrapper.on("click",".waiting-submit-btn",function(){var a=$(this);a.hasClass("disable")||(log.send({module:"question",page:"question",area:"qb-side-wait-answer-submit",action:"click",entry:e.entry}),ec.fire("login.check",{isLogin:function(){var t=a.data("index");e.data[t]&&(e.dialog=new AnswerDialog({entry:e.entry,data:e.data[t],callback:function(){popTip("您的回答已提交成功"),a.find("span").text("已回答").parent().addClass("disable")}}))},noLogin:function(){ec.fire("login.log",{onLoginSuccess:function(){window.location.reload()}})}}))}).on("click",".waiting-answers-change",function(){$(this).hasClass("loading")||(log.send({module:"question",page:"question",area:"qb-side-wait-answer-change",action:"click",entry:e.entry}),$(this).addClass("loading"),e.fetchData())}).on("click",".waiting-question a",function(){log.send({module:"question",page:"question",area:"qb-side-wait-answer-qtitle",action:"click",entry:e.entry})})}}});